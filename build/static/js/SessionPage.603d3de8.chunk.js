"use strict";(self.webpackChunksea_tutor_react=self.webpackChunksea_tutor_react||[]).push([[742],{46311:function(t,e,n){n.d(e,{Z:function(){return a}});var i=n(46123),s=n.n(i),o=(n(47313),"TableSwitch_btn__Qspcn"),r=n(46417),a=function(t){var e=t.title,n=t.bg;return(0,r.jsx)("button",{className:s()(o,n,"text-uppercase"),children:e})}},4255:function(t,e,n){var i=n(29439),s=n(47313),o=s.useState,r=s.useEffect;e.Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=o(t),s=(0,i.Z)(n,2),a=s[0],l=s[1];return r((function(){var n=setTimeout((function(){l(t)}),e);return function(){clearTimeout(n)}}),[t,e]),a}},8836:function(t,e,n){n.r(e),n.d(e,{default:function(){return F}});var i=n(29439),s=n(4809),o=n(47313),r=n(85554),a=n(97738),l="pages_tBTn_s1__xXXRI",u="pages_tBTn_s2__5wBAb",d="pages_tBTn_s3__X4AWY",c="pages_tBTn_s4__-mRUH",v=n(46311),f=n(93721),_=n(25327),m=n(40713),h=n(58467),D=n(70816),p=n.n(D),Y=n(4255),S=n(48354),g=n(5618),b=n(46417),F=function(){var t=(0,r.I0)(),e=(0,h.s0)(),n=(0,r.v9)((function(t){return t.session})),D=n.SessionDetails,F=n.sortField,M=n.sortOrder,k=n.statusFilterR,T=n.typeFilterR,x=n.dateFilterR,j=n.subjectFilterR,E=n.page,N=n.sizePerPage,y=n.totalPage,C=n.isLoading,P=(0,o.useState)(""),Z=(0,i.Z)(P,2),I=Z[0],O=Z[1],R=(0,o.useMemo)((function(){return[k,j,T,x].some((function(t){return!!t}))}),[k,j,T,x]),A=(0,o.useState)(null),w=(0,i.Z)(A,2),B=w[0],G=w[1],X=(0,Y.Z)(null===I||void 0===I?void 0:I.trim()),J=(0,o.useMemo)((function(){return{subject:j,type:T,status:k}}),[k,j,T]),U=function(t,n){e("/"+m.Z.SESSION_PAGE+"/"+t,{state:{isReschedule:null===n||void 0===n?void 0:n.is_reschedule}})},L=[{dataField:"pk_ses_id",text:"",hidden:!0},{dataField:"ses_date",text:"Date",sort:!0,formatter:function(t,e){var n=null===e||void 0===e?void 0:e.ses_date,i=p()(n).format("D MMM YYYY (ddd)");return(0,b.jsx)("div",{className:"cursor-pointer",onClick:function(){U(null===e||void 0===e?void 0:e.pk_ses_key,e)},children:i})}},{dataField:"time",text:"Time",sort:!0,formatter:function(t,e){var n=p()(null===e||void 0===e?void 0:e.ses_start_time,"hh:mm A"),i=p()(null===e||void 0===e?void 0:e.ses_end_time,"hh:mm A"),s=(0,S.T)(n),o=(0,S.T)(i);return(0,b.jsxs)("div",{className:"cursor-pointer",onClick:function(){U(null===e||void 0===e?void 0:e.pk_ses_key,e)},children:[s," - ",o]})}},{dataField:"sest_name",text:"Session Name",sort:!0,formatter:function(t,e){var n,i=null===e||void 0===e||null===(n=e.tbl_session_time)||void 0===n?void 0:n.sest_name;return(0,b.jsx)("div",{className:"cursor-pointer",children:i})}},{dataField:"studentCount",text:"Students",sort:!0,formatter:function(t,e){var n,i,s=null===e||void 0===e||null===(n=e.tbl_session_time)||void 0===n||null===(i=n.tbl_student_enrolments)||void 0===i?void 0:i.length;return(0,b.jsx)("div",{className:"cursor-pointer",children:s||0})}},{dataField:"subject_name",text:"Subject",sort:!0,formatter:function(t,e){var n,i=(0,g.Z)(null===e||void 0===e||null===(n=e.tbl_session_time)||void 0===n?void 0:n.tbl_student_enrolments);return(0,b.jsx)("div",{className:"cursor-pointer",children:i||"-"})}},{dataField:"session_type",text:"Type",formatter:function(t,e){return(0,b.jsx)("div",{className:"cursor-pointer",children:null===e||void 0===e?void 0:e.type})}},{dataField:"status",text:"Status",sort:!1,formatter:function(t,e){var n=e,i="";1===(null===n||void 0===n?void 0:n.ses_reassigned)?i=2:1===(null===n||void 0===n?void 0:n.ses_is_completed)?i=4:0===(null===n||void 0===n?void 0:n.ses_status)?i=1:1===(null===n||void 0===n?void 0:n.ses_status)&&(i=3);var s=1===+i?l:2===+i?u:3===+i?d:4===+i?c:"",o=function(t){return 1===+t?f.JM.UPCOMING:2===+t?f.JM.REASSIGNED:3===t?f.JM.ONGOING:4===+t?f.JM.COMPLETED:""}(i);return(0,b.jsx)(v.Z,{title:o,bg:s})}},{dataField:"action",text:"",formatter:function(t,e){return(0,b.jsx)("img",{src:_.UV,alt:"",className:"cursor-pointer",onClick:function(){U(null===e||void 0===e?void 0:e.pk_ses_key,e)}})}}],z={onClick:function(t,e,n){U(null===e||void 0===e?void 0:e.pk_ses_key,e)}},H=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=p()().add(6,"days").toDate(),s={endDate:p()(e.endDate).format("YYYY-MM-DD"),startDate:p()(e.startDate).format("YYYY-MM-DD")},o={endDate:p()(i).format("YYYY-MM-DD"),startDate:p()().format("YYYY-MM-DD")};t((0,a.rv)(n?o:s))};return(0,o.useEffect)((function(){G(x?{endDate:p()(null===x||void 0===x?void 0:x.endDate).toDate(),startDate:p()(null===x||void 0===x?void 0:x.startDate).toDate(),key:"selection"}:"")}),[x]),(0,o.useEffect)((function(){var e;return e=t((0,a.cb)({search:X,status:k,type:T,subject:""!==j?3===j?[1,2]:0===j?[]:[j]:[],sort_by:F,sort_order:M,to_date:x?p()(x.endDate).format("YYYY-MM-DD"):"",from_date:x?p()(x.startDate).format("YYYY-MM-DD"):"",page:E,limit:N})),localStorage.removeItem("sessionTabId"),localStorage.removeItem("sessionData"),function(){e&&e.abort()}}),[t,k,T,j,F,M,X,x,E,N]),(0,o.useEffect)((function(){H("",!0)}),[]),(0,b.jsx)("div",{className:"p-3",children:(0,b.jsx)(s.Z,{keyField:"pk_ses_id",handleFilters:!0,isSearch:!0,search:I,columns:L,list:(null===D||void 0===D?void 0:D.sessions)||[],isDateFilter:!0,isStatus:!0,isSubject:!0,isType:!0,statusList:f.eV,page:E,sizePerPage:N,totalPages:y,placeholderMsg:f.ZX.SESSIONS,isFilter:R,filterState:J,initialDate:B,setInitialDate:G,loading:C,handleSearch:function(e){O(e),t((0,a.Qi)(e))},handleFilter:function(e,n){n===f.DF.SUBJECT?t((0,a.TR)(null===e||void 0===e?void 0:e.value)):n===f.DF.TYPE?t((0,a.kq)(null===e||void 0===e?void 0:e.value)):n===f.DF.STATUS&&t((0,a.N_)(null===e||void 0===e?void 0:e.value))},handleSizePerPageChange:function(e){t((0,a.T_)(e))},handlePageChange:function(e){t((0,a.Er)(e))},onTableChange:function(e,n){var i=n.sortField,s=n.sortOrder;if("sort"===e)t((0,a.XX)(i)),t((0,a.qk)(s))},handleDateFilter:H,handleClearFilter:function(){G(null),t((0,a.YO)())},rowEvents:z,sortField:F,sortOrder:M})})}},48354:function(t,e,n){n.d(e,{T:function(){return i}});var i=function(t){var e=arguments.length>2?arguments[2]:void 0,n="ha";return n="00"===(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.add(e,"minutes"):t).format("mm")?"ha":"h:mma",t.format(n)}},5618:function(t,e,n){var i=n(93433),s=n(93721);e.Z=function(){var t=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){var n;null===e||void 0===e||null===(n=e.tbl_enrolment_subjects)||void 0===n||n.forEach((function(e){t.push(1===+(null===e||void 0===e?void 0:e.fk_sub_id)?s.pY.ENGLISH:2===+(null===e||void 0===e?void 0:e.fk_sub_id)?s.pY.MATHS:"")}))})),(0,i.Z)(new Set(t)).sort().join(" & ")}}}]);