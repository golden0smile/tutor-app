"use strict";(self.webpackChunksea_tutor_react=self.webpackChunksea_tutor_react||[]).push([[614],{42287:function(e,n,i){i.r(n),i.d(n,{default:function(){return qe}});var l=i(93433),s=i(29439),o=i(773),t=i(25327),d=i(70816),a=i.n(d),u=i(47313),v=i(85554),c=i(58467),r=i(31387),_=i(40713),m="ModalforAwardSession_modalBody__GVNdq",f="ModalforAwardSession_modalContainerItem__tyo3K",h="ModalforAwardSession_modalInput__B1lz1",b="ModalforAwardSession_modalContainerTickSection__2xvGK",j="ModalforAwardSession_modalTable__Z-wiJ",x="ModalforAwardSession_modalTableTitle__5SIkd",y="ModalforAwardSession_modalTableTitleItem__2A1io",S="ModalforAwardSession_modalTableColumns__n7mnN",p="ModalforAwardSession_modalTableColumnsItem__r1ANC",k=i(46417),N=function(){var e,n=(0,v.v9)((function(e){return e.session})).awardCoinsDetails;return(0,k.jsxs)(u.Fragment,{children:[(0,k.jsxs)("div",{className:b,children:[(0,k.jsx)("img",{style:{objectFit:"contain"},src:t.Iy,alt:""}),(0,k.jsx)("label",{children:"Coins awarded"})]}),(0,k.jsxs)("div",{className:j,children:[(0,k.jsxs)("div",{className:x,children:[(0,k.jsx)("div",{className:y,children:(0,k.jsx)("label",{children:"Name"})}),(0,k.jsx)("div",{className:y,children:(0,k.jsx)("label",{children:"Coins"})}),(0,k.jsx)("div",{className:y,children:(0,k.jsx)("label",{children:"Reason"})})]}),(0,k.jsx)("div",{className:S,children:null===n||void 0===n||null===(e=n.coins)||void 0===e?void 0:e.map((function(e,n){var i;return(0,k.jsxs)("div",{className:p,children:[(0,k.jsx)(u.Fragment,{children:(0,k.jsx)("label",{children:null===e||void 0===e||null===(i=e.student)||void 0===i?void 0:i.st_first_name})}),(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)("img",{src:t.e2,alt:""}),(0,k.jsxs)("label",{children:["+",null===e||void 0===e?void 0:e.coins_earned," Coins"]})]}),(0,k.jsx)("label",{children:null===e||void 0===e?void 0:e.remarks})]},n)}))})]})]})},T={modalMainContainer:"ModalForEndSession_modalMainContainer__1rsDZ",modalContainer:"ModalForEndSession_modalContainer__wJyXp",modalHeader:"ModalForEndSession_modalHeader__gJJxj",modalBody:"ModalForEndSession_modalBody__smHtC",modalContainerItem:"ModalForEndSession_modalContainerItem__MBh1b",modalInput:"ModalForEndSession_modalInput__OBZJw",modalInputIcon:"ModalForEndSession_modalInputIcon__zLUAc",modalButton:"ModalForEndSession_modalButton__cBmk4",modalContainerTickSection:"ModalForEndSession_modalContainerTickSection__GXbGY",modalTable:"ModalForEndSession_modalTable__j4Npg",modalTableTitle:"ModalForEndSession_modalTableTitle__I-AHf",modalTableTitleItem:"ModalForEndSession_modalTableTitleItem__6X8yW",modalTableColumns:"ModalForEndSession_modalTableColumns__T1Njv",modalTableColumnsItem:"ModalForEndSession_modalTableColumnsItem__q+0S4",modalInputRadio:"ModalForEndSession_modalInputRadio__B+zb1",modalTableTitle1:"ModalForEndSession_modalTableTitle1__RH-N-"},g=i(77867),Z=i(18317),C=[{id:1,label:"Attended",value:"Attended"},{id:2,label:"Not attended",value:"Not attended"}],w=function(e){var n,i,s=e.activityList,o=void 0===s?[]:s,t=e.setActivityList,d=e.attendance,a=void 0===d?[]:d,c=e.setAttendance,r=(0,v.v9)((function(e){return e.session})).sessionStudents,_=function(e){var n=null===a||void 0===a?void 0:a.find((function(n){return n.student_key===e}));return n?(null===C||void 0===C?void 0:C.find((function(e){return e.id===(null===n||void 0===n?void 0:n.attendance_id)}))).value:""};return(0,k.jsx)("div",{children:(0,k.jsx)("div",{className:T.modalBody,children:(0,k.jsx)("div",{className:T.modalTableColumnsSection,children:(0,k.jsxs)("div",{className:T.modalTable,children:[(0,k.jsxs)("div",{className:T.modalTableTitle,children:[(0,k.jsx)("div",{className:T.modalTableTitleItem,children:(0,k.jsx)("label",{children:"Name"})}),(0,k.jsx)("div",{className:T.modalTableTitleItem,children:(0,k.jsx)("label",{children:"Attendance"})}),(0,k.jsx)("div",{className:T.modalTableTitleItem,children:(0,k.jsx)("label",{children:"Move to homework"})})]}),null===r||void 0===r||null===(n=r.tbl_session_time)||void 0===n||null===(i=n.tbl_student_enrolments)||void 0===i?void 0:i.map((function(e,n){var i,s,d,v,r,m,f,h,b;return(0,k.jsxs)("div",{className:T.modalTableTitle1,children:[(0,k.jsx)("div",{className:T.modalTableTitleItem,children:(0,k.jsxs)("label",{children:[null===e||void 0===e||null===(i=e.tbl_student)||void 0===i?void 0:i.st_first_name," ",null===e||void 0===e||null===(s=e.tbl_student)||void 0===s?void 0:s.st_surname]})}),(0,k.jsx)("div",{className:T.modalTableTitleItem,children:(0,k.jsx)(g.Z,{value:_(null===e||void 0===e||null===(d=e.tbl_student)||void 0===d?void 0:d.pk_student_key),handleChange:function(n){var i;return function(e,n){var i={student_key:n,attendance_id:e.id},s=(0,l.Z)(a),o=s.find((function(e){return e.student_key===n}));o?o.attendance_id=e.id:s.push(i),c(s)}(n,null===e||void 0===e||null===(i=e.tbl_student)||void 0===i?void 0:i.pk_student_key)},list:C})}),(0,k.jsx)("div",{className:T.modalTableTitleItem,children:0===(null===e||void 0===e||null===(v=e.tbl_student)||void 0===v||null===(r=v.LessonActivities)||void 0===r?void 0:r.length)?(0,k.jsx)(u.Fragment,{children:(0,k.jsx)("label",{children:"all activities completed"})}):(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)("input",{onChange:function(){var n,i;return function(e,n){var i=(0,l.Z)(o),s=i.find((function(n){return n.student_key===e}));s?i.pop(s):i.push({student_key:e,activities:n}),t(i)}(null===e||void 0===e||null===(n=e.tbl_student)||void 0===n?void 0:n.pk_student_key,null===e||void 0===e||null===(i=e.tbl_student)||void 0===i?void 0:i.LessonActivities)},value:(b=null===e||void 0===e||null===(m=e.tbl_student)||void 0===m?void 0:m.pk_student_key,!!(0,l.Z)(o).find((function(e){return e===b}))),type:"checkbox"})," ",(0,k.jsxs)("label",{children:[" ",null===e||void 0===e||null===(f=e.tbl_student)||void 0===f||null===(h=f.LessonActivities)||void 0===h?void 0:h.length," ","incomplete activities"]})]})})]},n)}))]})})})})},D=function(){var e=(0,v.v9)((function(e){return e.session})).endSessionDuration;return(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:T.modalContainerTickSection,children:(0,k.jsx)("img",{src:t.Iy,alt:""})}),(0,k.jsx)("center",{children:(0,k.jsxs)("label",{children:["Total time : ",(0,Z.U)(null===e||void 0===e?void 0:e.session_duration)]})}),(0,k.jsx)("br",{})]})},I=i(1413),A=[{label:"All students in the class",value:0}],E=function(e,n,i){var s,o,t,d=null===e||void 0===e||null===(s=e.tbl_session_time)||void 0===s||null===(o=s.tbl_student_enrolments)||void 0===o?void 0:o.map((function(e){var n,i,l;return{label:(null===e||void 0===e||null===(n=e.tbl_student)||void 0===n?void 0:n.st_first_name)+" "+(null===e||void 0===e||null===(i=e.tbl_student)||void 0===i?void 0:i.st_surname),value:null===e||void 0===e||null===(l=e.tbl_student)||void 0===l?void 0:l.pk_student_key}}));return(0,k.jsx)("div",{children:(0,k.jsxs)("div",{className:m,children:[(0,k.jsxs)("div",{className:f,children:[(0,k.jsx)("label",{children:"Student List"}),(0,k.jsx)(g.Z,{placeHolder:"Select student list",list:0===(null===i||void 0===i||null===(t=i.student[0])||void 0===t?void 0:t.value)?[]:[].concat(A,(0,l.Z)(d||[])),value:null===i||void 0===i?void 0:i.student,isMulti:!0,handleChange:function(e){var i=e.map((function(e){return e.value}));n((function(n){return(0,I.Z)((0,I.Z)({},n),{},{student:i.includes(0)?e.filter((function(e){return 0===e.value})):e})}))}})]}),(0,k.jsxs)("div",{className:f,children:[(0,k.jsx)("label",{children:"No of coins"}),(0,k.jsx)("input",{type:"text",className:h,placeholder:"0",value:null===i||void 0===i?void 0:i.coin,onChange:function(e){var i=e.target.value;if(+i>9999999)return r.Am.dismiss(),void r.Am.info("Amount of coins is too high!");/[a-zA-Z_@*%!$^[\]{}`\\()"/#&+-]/.test(i)||Number.isNaN(+i)?n((function(e){return(0,I.Z)((0,I.Z)({},e),{},{coin:""})})):n((function(e){return(0,I.Z)((0,I.Z)({},e),{},{coin:+i})}))}})]}),(0,k.jsxs)("div",{className:f,children:[(0,k.jsx)("label",{children:"Reason"}),(0,k.jsx)("textarea",{placeholder:"Notes",onChange:function(e){n((function(n){return(0,I.Z)((0,I.Z)({},n),{},{reason:e.target.value})}))},className:h,value:null===i||void 0===i?void 0:i.reason})]})]})})},M=i(71524),L=i(91112),B="Button_sessionCardDetailsButton__IdGrY",P="Button_sessionCardDetailsButtonOutline__xfnGh",O=function(e){var n=e.label,i=e.onButtonClick;return(0,k.jsx)("div",{onClick:function(){return i()},className:B,children:(0,k.jsx)("label",{children:n})})},F=function(e){var n=e.label,i=e.onButtonClick;return(0,k.jsx)("div",{onClick:function(){return i()},className:P,children:(0,k.jsx)("label",{children:n})})},R=i(33272),H=i(59786),V=i(59509),Y=i(76866),J=function(e){var n=e.show,i=e.onHide,l=e.title,s=e.onConfirm,o=e.message;return(0,k.jsx)(V.Z,{show:n,onHide:i,className:Y.Z.documentModal,centered:!0,children:(0,k.jsxs)(V.Z.Body,{className:"p-4",children:[(0,k.jsx)("i",{onClick:i,className:"fa-regular fa-circle-xmark  opacity-100 cursor-pointer position-absolute  ".concat(Y.Z.translateMiddle," ")}),(0,k.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[(0,k.jsx)("h6",{className:Y.Z.title,children:l}),(0,k.jsxs)("h6",{style:{marginTop:"10px"},children:[" ",o]}),(0,k.jsx)("button",{type:"submit",className:'"btn '.concat(Y.Z.btnPrimary,' boarder-0"'),onClick:s,children:"Yes"})]}),(0,k.jsx)("div",{className:"d-flex justify-content-end"})]})})},G=i(54902),K=function(e){return!!Array.isArray(e)&&!!(null!==e&&void 0!==e&&e.includes(1)||null!==e&&void 0!==e&&e.includes(2))},U=i(46123),q=i.n(U),z=i(93721),Q=function(e){var n,i=e.type,o=e.props,d=e.activity_list,a=e.handleActivityDelete,r=e.setViewReport,m=e.handleToggleSessionOffline,f=e.nextSessionKey,h=(0,u.useState)(0),b=(0,s.Z)(h,2),j=b[0],x=b[1],y=(0,u.useState)(!1),S=(0,s.Z)(y,2),p=S[0],N=S[1],T=(0,v.v9)((function(e){return e.session})).lessonPlan,g=(0,c.s0)(),C=6===(null===o||void 0===o?void 0:o.offlineStatus),w=(0,u.useCallback)((function(e){null!==o&&void 0!==o&&o.lesson_key?g("/".concat(_.Z.EDIT_LESSON_PLAN,"/").concat(null===o||void 0===o?void 0:o.lesson_key),{state:{sessionId:null===o||void 0===o?void 0:o.session_key,studentId:null===o||void 0===o?void 0:o.student_key,subjectId:null===o||void 0===o?void 0:o.subject_id,typePlan:e,selectedTab:+(null===o||void 0===o?void 0:o.selectedTab)}}):g("/".concat(_.Z.EDIT_LESSON_PLAN),{state:{sessionId:null===o||void 0===o?void 0:o.session_key,studentId:null===o||void 0===o?void 0:o.student_key,subjectId:null===o||void 0===o?void 0:o.subject_id,typePlan:e,selectedTab:+(null===o||void 0===o?void 0:o.selectedTab)}})}),[g,o]),D=function(){var e="Create",n="Edit";if(1!==+(null===o||void 0===o?void 0:o.selectedTab))return 2===+(null===o||void 0===o?void 0:o.selectedTab)?1===(null===o||void 0===o?void 0:o.status)?(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)(F,{onButtonClick:function(){return r(!0)},label:"View homework report"}),!C&&(0,k.jsx)(O,{onButtonClick:function(){return w(n)},label:"Edit homework plan"})]},null===o||void 0===o?void 0:o.id):0!==(null===o||void 0===o?void 0:o.status)||C?!C&&(0,k.jsx)(O,{onButtonClick:function(){return w(n)},label:"Edit homework plan"}):K(null===o||void 0===o?void 0:o.subject_id)&&(0,k.jsx)(O,{onButtonClick:function(){return w(e)},label:"Create homework plan"}):3===+(null===o||void 0===o?void 0:o.selectedTab)&&1===(0,R.lR)(d)?(0,k.jsx)(F,{label:"View ".concat(i?"homework":"lesson"," report"),onButtonClick:function(){return r(!0)}}):null;if(C){if(f)return(0,k.jsx)(O,{onButtonClick:function(){g("/"+_.Z.SESSION_PAGE+"/"+f)},label:"Plan next session"})}else{if(null===o||void 0===o||!o.code)return 1!==(null===o||void 0===o?void 0:o.status)||C?4===(null===o||void 0===o?void 0:o.offlineStatus)?(0,k.jsx)(O,{onButtonClick:function(){x(0),N(!0)},label:"Switch to online lesson"}):0!==(null===o||void 0===o?void 0:o.status)||C?!C&&(0,k.jsx)(O,{onButtonClick:function(){return w(n)},label:"Edit Lesson Plan"}):(0,k.jsxs)(u.Fragment,{children:[K(null===o||void 0===o?void 0:o.subject_id)&&(0,k.jsx)(O,{onButtonClick:function(){return w(e)},label:"Create Lesson Plan"}),!C&&(0,k.jsx)(O,{onButtonClick:function(){x(1),N(!0)},label:"Switch to offline lesson"})]},null===o||void 0===o?void 0:o.id):(0,k.jsx)(O,{onButtonClick:function(){return w(n)},label:"Edit Lesson Plan"});if(f)return(0,k.jsx)(O,{onButtonClick:function(){g("/"+_.Z.SESSION_PAGE+"/"+f)},label:"Plan next session"})}};return(0,k.jsxs)(u.Fragment,{children:[3===+(null===o||void 0===o?void 0:o.selectedTab)&&(0,k.jsxs)("label",{id:M.Z.titleSection,children:[i?"Homework":"Lesson"," plan"]}),(0,k.jsx)("div",{className:q()(M.Z.sessionCardItemPara,M.Z.subjectCard),children:(0,k.jsx)("p",{className:"mb-0",children:function(){var e;return(0,l.Z)(new Set((null===o||void 0===o||null===(e=o.subject_id)||void 0===e?void 0:e.map((function(e){return 1===+e?z.pY.ENGLISH:2===+e?z.pY.MATHS:""})))||[])).sort().join(" & ")}()})}),(0,k.jsx)("div",{className:M.Z.sessionCardItemPara,children:(0,k.jsx)("p",{children:function(){var e=1===+(null===o||void 0===o?void 0:o.selectedTab)?null===o||void 0===o?void 0:o.description:2===+(null===o||void 0===o?void 0:o.selectedTab)?null===o||void 0===o?void 0:o.homework_description:3===+(null===o||void 0===o?void 0:o.selectedTab)&&0===i?null===o||void 0===o?void 0:o.description:null===o||void 0===o?void 0:o.homework_description;return e||!1}()})}),0===(0,R.lR)(d)&&3===+(null===o||void 0===o?void 0:o.selectedTab)?null:(0,k.jsxs)("div",{className:M.Z.sessionCardItemCoinDur,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("img",{alt:"coin-icon",src:t.e2}),(0,k.jsx)("label",{style:{fontSize:"12px"},children:0===(null===o||void 0===o||null===(n=o.activity_list)||void 0===n?void 0:n.length)?"-":[0===(0,G.Z)(null===o||void 0===o?void 0:o.activity_list)?0:"".concat(null===o||void 0===o?void 0:o.coins,"/").concat((0,G.Z)(null===o||void 0===o?void 0:o.activity_list))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("img",{alt:"clock-icon",src:t.SU}),(0,k.jsx)("label",{style:{fontSize:"12px"},children:null!==o&&void 0!==o&&o.duration?(0,Z.g)(null===o||void 0===o?void 0:o.duration):"-"})]})]}),(0,k.jsxs)("div",{className:M.Z.sessionCardItemStatus,children:[(0,k.jsx)("label",{className:0===(0,R.lR)(d)?M.Z.notCompleted:1===(0,R.lR)(d)?M.Z.fullyCompleted:M.Z.partiallyCompleted,children:C?"Defer":(0,R.U6)(d,+(null===o||void 0===o?void 0:o.selectedTab),null===T||void 0===T?void 0:T.ses_status)}),null!==o&&void 0!==o&&o.is_lesson_sequential?(0,k.jsx)("img",{alt:"sequential-icon",src:t.V$}):(0,k.jsx)("img",{alt:"sequential-icon",src:t.u4})]}),(0,k.jsx)("div",{className:M.Z.sessionCardItemButtonContainer,children:(0,k.jsx)(D,{})},null===o||void 0===o?void 0:o.id),(0,k.jsx)("div",{style:null!==o&&void 0!==o&&o.code&&!f&&1===+(null===o||void 0===o?void 0:o.selectedTab)?{maxHeight:"calc(100% - 149px)"}:2===+(null===o||void 0===o?void 0:o.selectedTab)&&1===(null===o||void 0===o?void 0:o.status)?{maxHeight:"calc(100% - 269px)"}:{maxHeight:"calc(100% - 219px)"},className:3===+(null===o||void 0===o?void 0:o.selectedTab)?M.Z.sessionCardItemActivityCardSectionNoScroll:M.Z.sessionCardItemActivityCardSection,children:!C&&(null===d||void 0===d?void 0:d.map((function(e,n){return(0,k.jsx)(L.Z,{handleActivityDelete:a,lesson_key:null===o||void 0===o?void 0:o.lesson_key,subject_id:+(null===e||void 0===e?void 0:e.fk_sub_id),values:e,type:i,sessionID:null===o||void 0===o?void 0:o.sessionId,studentID:null===o||void 0===o?void 0:o.studentId,handlePreview:function(){!function(e,n,i){var l=0===+n?"assessment":1===+n?"videos":5===+n?"worksheets":3===+n?"link":4===+n?"task":2===+n?"diagnostic":6===+n?"videos":7===+n?"lcms-worksheets":"",s="".concat("http://tutor.dev.mygooroo.io","/").concat(_.Z.SESSION_PAGE,"/").concat(null===o||void 0===o?void 0:o.session_key,"?sessionDetailedId=").concat(null===o||void 0===o?void 0:o.session_key,"&selectedTab=").concat(null===o||void 0===o?void 0:o.selectedTab),t=6===+n?"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e,"?type=").concat(n,"&subject_id=").concat(i):7===+n?"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e,"?subject_id=").concat(i):"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e),d={studentID:null===o||void 0===o?void 0:o.student_key,subjectID:+i,isActivityPage:!1,activityNodeId:e,redirectUrl:s,tutorToken:H.Z.get(H.e.TOKEN)};H.Z.setStudent(H.e.STUDENT_DATA,JSON.stringify(d)),console.log({studentData:d,url:t}),window.open(t,"_self")}(e.pk_lesson_activity_key,null===e||void 0===e?void 0:e.activity_type,+(null===e||void 0===e?void 0:e.fk_sub_id))},handleMarkView:function(){!function(e,n,i){var l=5===+n?"worksheets":0===+n?"manual-marking":7===+n?"lcms-worksheets":"",s="".concat("http://tutor.dev.mygooroo.io","/").concat(_.Z.SESSION_PAGE,"/").concat(null===o||void 0===o?void 0:o.session_key,"?sessionDetailedId=").concat(null===o||void 0===o?void 0:o.session_key,"&selectedTab=").concat(null===o||void 0===o?void 0:o.selectedTab),t=7===+n?"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e,"?subject_id=").concat(i):"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e),d={studentID:null===o||void 0===o?void 0:o.student_key,subjectID:i,redirectUrl:s,manual:!0,tutorToken:H.Z.get(H.e.TOKEN)};H.Z.setStudent(H.e.STUDENT_DATA,JSON.stringify(d)),console.log({studentData:d,url:t}),window.open(t,"_self")}(e.pk_lesson_activity_key,null===e||void 0===e?void 0:e.activity_type,+(null===e||void 0===e?void 0:e.fk_sub_id))}},n)})))}),p?(0,k.jsx)(J,{show:p,onConfirm:function(){m(j),N(!1)},onHide:function(){return N(!1)},title:j?"Switch to offline":"Switch to online",message:j?"Do you want to switch the session to offline?":"Do you want to switch the session to online?"}):null]},null===o||void 0===o?void 0:o.id)},$=i(99815),W=i(18423),X=i(97738),ee=i(68366),ne=i(79178),ie=i(60390),le=function(e){var n,i,d,r,m,f,h=(0,v.v9)((function(e){return e.session})).lessonPlan,b=(0,v.v9)((function(e){return e.session.studentDetails})),j=b.pastSession,x=b.pastSession_sortOrder,y=b.pastSession_sortField,S=b.pastSessionLoading,p=(0,c.s0)(),N=(0,u.useState)(!1),T=(0,s.Z)(N,2),g=T[0],Z=T[1],C=(0,u.useState)(!1),w=(0,s.Z)(C,2),D=w[0],I=w[1],A=(0,u.useState)(!1),E=(0,s.Z)(A,2),L=E[0],B=E[1],P=(0,u.useState)(!1),O=(0,s.Z)(P,2),F=O[0],H=O[1],V=(0,u.useState)(0),Y=(0,s.Z)(V,2),J=Y[0],G=Y[1],K=(0,v.I0)(),U=function(n){G(n);var i={is_homework:n,lesson_key:null===e||void 0===e?void 0:e.lesson_key,student_key:null===e||void 0===e?void 0:e.student_key};h&&K((0,X.IZ)(i)).then((function(e){var n;200===(null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.statusCode)&&I(!0)}))};return(0,u.useEffect)((function(){if(null!==e&&void 0!==e&&e.student_key){var n={pk_student_key:null===e||void 0===e?void 0:e.student_key,sort_by:y,sort_order:x};K((0,X.ep)(n))}}),[x,y,K]),(0,k.jsxs)("div",{className:3===+(null===e||void 0===e?void 0:e.selectedTab)?M.Z.sessionCardItem:M.Z.advSessionCardItem,children:[(0,k.jsxs)("div",{className:M.Z.sessionCardItemUser,children:[(0,k.jsxs)("div",{onClick:function(){return function(){B(!0);var n={pk_student_key:null===e||void 0===e?void 0:e.student_key};K((0,X.ep)(n))}()},className:M.Z.user_v,children:[(0,k.jsx)("img",{alt:"",src:g?t.wO:null===e||void 0===e?void 0:e.userIcon,onError:function(){Z(!0)}}),(0,k.jsxs)("span",{id:3!==+(null===e||void 0===e?void 0:e.selectedTab)?M.Z.usernameOverFlowStyle:null!==e&&void 0!==e&&e.attendance?M.Z.usernameOverFlowStyle1:M.Z.usernameOverFlowStyle,children:[null===e||void 0===e?void 0:e.name," ",null===e||void 0===e?void 0:e.surname]})]}),3===+(null===e||void 0===e?void 0:e.selectedTab)&&null!==e&&void 0!==e&&e.attendance?(0,$.m)(null===e||void 0===e?void 0:e.attendance):null]}),3===+(null===e||void 0===e?void 0:e.selectedTab)&&(0,k.jsx)(u.Fragment,{children:(0,k.jsxs)("div",{className:M.Z.sessionDetailsCardItemSessionNameDetails,children:[(0,k.jsxs)("div",{className:M.Z.sessionDetailsCardItemSessionNameDetailsSection1,children:[(0,k.jsx)("label",{children:null===h||void 0===h||null===(n=h.tbl_session_time)||void 0===n?void 0:n.sest_name}),(0,k.jsx)("p",{children:null===h||void 0===h||null===(i=h.tbl_session_time)||void 0===i?void 0:i.sest_type})]}),(0,k.jsxs)("div",{className:M.Z.sessionDetailsCardItemSessionNameDetailsSection2,style:{justifyContent:"flex-end"},children:[(0,k.jsxs)("span",{children:[null!==h&&void 0!==h&&h.ses_date?a()(null===h||void 0===h?void 0:h.ses_date).format("DD MMM YYYY"):null," ","(",null!==h&&void 0!==h&&null!==(d=h.tbl_session_time)&&void 0!==d&&d.sest_day?(0,R.hJ)(null===h||void 0===h||null===(r=h.tbl_session_time)||void 0===r?void 0:r.sest_day):null,")"]}),(0,k.jsxs)("p",{children:[null!==h&&void 0!==h&&h.ses_start_time?(0,R.hK)(null===h||void 0===h?void 0:h.ses_start_time):"","-",null!==h&&void 0!==h&&h.ses_end_time?(0,R.hK)(null===h||void 0===h?void 0:h.ses_end_time):""," ","(",null!==h&&void 0!==h&&h.ses_start_time&&null!==h&&void 0!==h&&h.ses_end_time?(0,ie.w)(null===h||void 0===h?void 0:h.ses_start_time,null===h||void 0===h?void 0:h.ses_end_time):"-",")"]})]})]})},"header-".concat(null===e||void 0===e?void 0:e.id)),3===+(null===e||void 0===e?void 0:e.selectedTab)?(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)(Q,{handleActivityDelete:null===e||void 0===e?void 0:e.handleActivityDelete,type:0,props:e,setViewReport:function(){return U(0)},activity_list:null===e||void 0===e||null===(m=e.activity_list)||void 0===m?void 0:m.filter((function(e){return!(null!==e&&void 0!==e&&e.marked_for_homework)}))},"lesson-".concat(null===e||void 0===e?void 0:e.id)),(0,k.jsx)("br",{}),(0,k.jsx)(Q,{handleActivityDelete:null===e||void 0===e?void 0:e.handleActivityDelete,type:1,props:e,setViewReport:function(){return U(1)},activity_list:null===e||void 0===e||null===(f=e.activity_list)||void 0===f?void 0:f.filter((function(e){return null===e||void 0===e?void 0:e.marked_for_homework}))},"homework-".concat(null===e||void 0===e?void 0:e.id))]},null===e||void 0===e?void 0:e.id):(0,k.jsx)(Q,{nextSessionKey:null===e||void 0===e?void 0:e.nextSessionKey,handleActivityDelete:null===e||void 0===e?void 0:e.handleActivityDelete,type:1===+(null===e||void 0===e?void 0:e.selectedTab)?0:1,activity_list:function(){var n,i,s=null!==e&&void 0!==e&&e.activity_list?(0,l.Z)(null===e||void 0===e?void 0:e.activity_list):[];return s=1===+(null===e||void 0===e?void 0:e.selectedTab)?null===(n=s)||void 0===n?void 0:n.filter((function(e){return!e.marked_for_homework})):2===+(null===e||void 0===e?void 0:e.selectedTab)&&(null===(i=s)||void 0===i?void 0:i.filter((function(e){return e.marked_for_homework})))}(),setViewReport:function(){return U(1===+(null===e||void 0===e?void 0:e.selectedTab)?0:1)},props:e,offlineStatus:null===e||void 0===e?void 0:e.offlineStatus,handleToggleSessionOffline:null===e||void 0===e?void 0:e.handleToggleSessionOffline},null===e||void 0===e?void 0:e.id),(0,k.jsx)(o.Z,{show:D,closeModal:function(){return I(!1)},title:"View ".concat(+J?"homework":"lesson"," report"),hide:function(){return I(!1)},modalBody:(0,W.Z)()}),L&&(0,k.jsx)(ee.Z,{student_key:null===e||void 0===e?void 0:e.student_key,subject_id:null===e||void 0===e?void 0:e.subject_id,subjectName:null===e||void 0===e?void 0:e.subjectName,modalForViewPastLessons:F,setModalForViewPastLessons:H,closeModal:B}),F?(0,k.jsx)(o.Z,{closeModal:function(){return H(!1)},show:F,title:"View past sessions",hide:function(){return H(!1)},modalBody:(0,ne.Z)(j,(function(e,n){var i=n.sortField,l=n.sortOrder;if("sort"===e)K((0,X.cJ)(i)),K((0,X._Y)(l))}),S,y,x,(function(e){B(!1),H(!1),p("/"+_.Z.SESSION_PAGE+"/"+e.pk_ses_key)}))}):null]})},se=function(e){var n=e.selectedTab,i=e.code,l=e.handleActivityDelete,s=e.handleToggleSessionOffline,o=(0,v.v9)((function(e){var n;return null===(n=e.session)||void 0===n?void 0:n.lessonPlan})),t=(0,u.useMemo)((function(){var e,n;return null!==o&&void 0!==o&&null!==(e=o.tbl_session_time)&&void 0!==e&&e.tbl_student_enrolments?null===o||void 0===o||null===(n=o.tbl_session_time)||void 0===n?void 0:n.tbl_student_enrolments:[]}));return(0,k.jsx)("div",{className:M.Z.sessionCardMainContainer,children:(null===t||void 0===t?void 0:t.length)>0&&(0,k.jsx)("div",{className:M.Z.sessionCardList,children:null===t||void 0===t?void 0:t.map((function(e,t){var d,a,v,c,r,_,m,f,h,b,j,x,y,S,p,N,T,g,Z,C,w,D,I,A,E,M,L,B,P,O;return(null===e||void 0===e?void 0:e.tbl_student)&&(0,k.jsx)(u.Fragment,{children:(0,k.jsx)(le,{nextSessionKey:null===e||void 0===e||null===(d=e.tbl_student)||void 0===d||null===(a=d.next_session)||void 0===a?void 0:a.pk_ses_key,handleActivityDelete:l,code:i,selectedTab:n,getStatus:R.lR,getActivityStatus:R.U6,id:null===e||void 0===e?void 0:e.pk_enrol_key,lesson_key:null===e||void 0===e||null===(v=e.tbl_student)||void 0===v||null===(c=v.Lesson)||void 0===c?void 0:c.pk_lesson_key,userIcon:null===e||void 0===e||null===(r=e.tbl_student)||void 0===r?void 0:r.st_avatar,name:null===e||void 0===e||null===(_=e.tbl_student)||void 0===_?void 0:_.st_first_name,surname:null===e||void 0===e||null===(m=e.tbl_student)||void 0===m?void 0:m.st_surname,duration:null===e||void 0===e?void 0:e.totalDuration,coins:null!==e&&void 0!==e&&null!==(f=e.tbl_student)&&void 0!==f&&null!==(h=f.Lesson)&&void 0!==h&&h.coins_earned?null===e||void 0===e||null===(b=e.tbl_student)||void 0===b||null===(j=b.Lesson)||void 0===j?void 0:j.coins_earned:0,description:null===e||void 0===e||null===(x=e.tbl_student)||void 0===x||null===(y=x.Lesson)||void 0===y?void 0:y.description,homework_description:null===e||void 0===e||null===(S=e.tbl_student)||void 0===S||null===(p=S.Lesson)||void 0===p?void 0:p.homework_description,is_lesson_sequential:null===e||void 0===e||null===(N=e.tbl_student)||void 0===N||null===(T=N.Lesson)||void 0===T?void 0:T.is_lesson_sequential,attendance:null===e||void 0===e?void 0:e.stu_status,status:(0,R.lR)(null===e||void 0===e||null===(g=e.tbl_student)||void 0===g||null===(Z=g.Lesson)||void 0===Z?void 0:Z.LessonActivities),activity_list:null!==e&&void 0!==e&&null!==(C=e.tbl_student)&&void 0!==C&&null!==(w=C.Lesson)&&void 0!==w&&w.LessonActivities?null===e||void 0===e||null===(D=e.tbl_student)||void 0===D||null===(I=D.Lesson)||void 0===I?void 0:I.LessonActivities:[],session_key:null===o||void 0===o?void 0:o.pk_ses_key,student_key:null===e||void 0===e||null===(A=e.tbl_student)||void 0===A?void 0:A.pk_student_key,subject_id:null===e||void 0===e||null===(E=e.tbl_enrolment_subjects)||void 0===E?void 0:E.map((function(e){return null===e||void 0===e?void 0:e.fk_sub_id})).sort(),subjectName:null===e||void 0===e||null===(M=e.tbl_enrolment_subjects)||void 0===M?void 0:M.map((function(e){return null===e||void 0===e?void 0:e.subject_name})),offlineStatus:(null===e||void 0===e||null===(L=e.tbl_student)||void 0===L||null===(B=L.tbl_session_attendances)||void 0===B?void 0:B.length)>0&&(null===e||void 0===e||null===(P=e.tbl_student)||void 0===P||null===(O=P.tbl_session_attendances[0])||void 0===O?void 0:O.attendance_status),handleToggleSessionOffline:function(n){var i;return s(n,null===o||void 0===o?void 0:o.pk_ses_key,null===e||void 0===e||null===(i=e.tbl_student)||void 0===i?void 0:i.pk_student_key)}})},t)}))})})},oe=i(4809),te="StudentTable_tBTn_a0__rSBHF",de="StudentTable_tBTn_a2__HWTej",ae="StudentTable_tBTn_a1__Qqn1h",ue="StudentTable_tBTn_a3__5RGhC",ve="StudentTable_tBTn_a4__o3h7W",ce="StudentTable_session_details_student_table__KFx+e",re=i(46311),_e=i(92142),me=function(e){var n,i,l,d,a=e.isReschedule,r=(0,v.I0)(),m=(0,c.s0)(),f=(0,v.v9)((function(e){return e.session.studentTable})).list,h=(0,v.v9)((function(e){return e.session.studentDetails})),b=h.pastSession,j=h.pastSession_sortOrder,x=h.pastSession_sortField,y=h.pastSessionLoading,S=(0,u.useState)(!1),p=(0,s.Z)(S,2),N=p[0],T=p[1],g=(0,u.useState)(!1),Z=(0,s.Z)(g,2),C=Z[0],w=Z[1],D=(0,u.useState)(""),I=(0,s.Z)(D,2),A=I[0],E=I[1],M=[{dataField:"sname",text:"Name",formatter:function(e,n){return(0,k.jsx)("div",{children:(null===n||void 0===n?void 0:n.st_first_name)+" "+(null===n||void 0===n?void 0:n.st_surname)})}},{dataField:"level",text:"Level",formatter:function(e,n){return(0,k.jsx)("div",{children:null===n||void 0===n?void 0:n.level_name})}},{dataField:"school",text:"School Name",formatter:function(e,n){return null!==n&&void 0!==n&&n.sc_name?(0,k.jsx)("div",{children:null===n||void 0===n?void 0:n.sc_name}):(0,k.jsx)("div",{children:"-"})}},{dataField:"attendance_status",text:"Attendance",formatter:function(e,n){var i=0===+n.attendance_status?te:1===+n.attendance_status?ae:2===+n.attendance_status?de:3===+n.attendance_status?ue:4===+n.attendance_status?ve:"",l=(0,_e.z)(+n.attendance_status);return(0,k.jsx)(re.Z,{title:l,bg:i})}},{dataField:"previousNotes",text:"Previous Notes",formatter:function(e,n){var i,l;return null!==(i=n.previous_note)&&void 0!==i&&i.notes_details?(0,k.jsx)("div",{children:null===(l=n.previous_note)||void 0===l?void 0:l.notes_details}):(0,k.jsx)("div",{className:"",children:"-"})}},{dataField:"todaysNotes",text:"Today's Notes",formatter:function(e,n){var i,l;return null!==(i=n.todays_note)&&void 0!==i&&i.notes_details?(0,k.jsx)("div",{children:null===(l=n.todays_note)||void 0===l?void 0:l.notes_details}):(0,k.jsx)("div",{className:"",children:"-"})}},{dataField:"action",text:"",formatter:function(e,n){return(0,k.jsx)("img",{src:t.UV,alt:"",onClick:function(){return function(e){T(!0),E(e);var n={pk_student_key:null===e||void 0===e?void 0:e.pk_student_key};r((0,X.ep)(n))}(n)},className:"cursor-pointer"})}}];return(0,u.useEffect)((function(){if(null!==A&&void 0!==A&&A.pk_student_key){var e={pk_student_key:null===A||void 0===A?void 0:A.pk_student_key,sort_by:x,sort_order:j};r((0,X.ep)(e))}}),[j,x,r]),(0,k.jsxs)("div",{className:ce,children:[N&&(0,k.jsx)(ee.Z,{student_key:null===A||void 0===A?void 0:A.pk_student_key,subject_id:null===A||void 0===A||null===(n=A.tbl_enrolment_subjects)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.fk_sub_id})),setModalForViewPastLessons:w,closeModal:T}),(0,k.jsx)(o.Z,{closeModal:function(){return w(!1)},show:C,title:"View past sessions",hide:function(){return w(!1)},modalBody:(0,ne.Z)(b,(function(e,n){var i=n.sortField,l=n.sortOrder;if("sort"===e)r((0,X.cJ)(i)),r((0,X._Y)(l))}),y,x,j,(function(e){T(!1),w(!1),localStorage.setItem("sessionTabId",1),m("/"+_.Z.SESSION_PAGE+"/"+e.pk_ses_key)}))}),(0,k.jsx)(oe.Z,{keyField:"pk_student_id",columns:M,list:a?null===f||void 0===f||null===(i=f.studentDetails)||void 0===i?void 0:i.tbl_student_enrolments:null===f||void 0===f||null===(l=f.studentDetails)||void 0===l||null===(d=l.tbl_session_time)||void 0===d?void 0:d.tbl_student_enrolments,isPagination:!1})]})},fe=i(1320),he="SessionDetails_sessionDetailsMainContainer__Q2DtM",be="SessionDetails_sessionDetailsHeaderMainSection__B4Sdz",je="SessionDetails_sessionDetailsHeaderSection__h8RuB",xe="SessionDetails_sessionDetailsHeaderSectionLeft__iab5J",ye="SessionDetails_sessionDetailsHeaderIcon__Hh6R9",Se="SessionDetails_sessionDetailsHeaderCont__1gxbI",pe="SessionDetails_sessionDetailsHeaderStatus__iMKLI",ke="SessionDetails_sessionDetailsHeaderContDate__-uWFW",Ne="SessionDetails_sessionDetailsHeaderContDateSection__eOgmE",Te="SessionDetails_subjectIcon__Q85ow",ge="SessionDetails_sessionDetailsHeaderContDateSectionContents__OQk3Y",Ze="SessionDetails_sessionDetailsHeaderSectionRight__UwHYL",Ce="SessionDetails_sessionDetailsHeaderSectionButton__L5sZ2",we="SessionDetails_disable__2E12O",De="SessionDetails_sessionDetailsTitleSection__c3Iuq",Ie="SessionDetails_sessionDetailsTitleSectionCont__tyR8o",Ae="SessionDetails_sessionDetailsTitleSectionCont2__emXZV",Ee="SessionDetails_sessionDetailsContentSection__z-VMS",Me="SessionDetails_sessionDetailsDdSection__VJtzZ",Le="SessionDetails_loader__FHYDV",Be={status:"Upcoming",color:"#5B51FF"},Pe={status:"Reassigned",color:"#4d4d4d"},Oe={code:1,status:"Completed",color:"#65A30D"},Fe={status:"Ongoing",color:"#EA580C"},Re=function(e){return null!==e&&void 0!==e&&e.ses_reassigned?Pe:null!==e&&void 0!==e&&e.ses_is_completed?Oe:null!==e&&void 0!==e&&e.ses_status?Fe:null!==e&&void 0!==e&&e.ses_status?void 0:Be},He=function(e){var n=e.show,i=e.onHide,l=e.title,s=void 0===l?"Term and condition":l,o=e.session_key,t=(0,v.I0)();return(0,k.jsx)(V.Z,{show:n,onHide:i,className:Y.Z.documentModal,centered:!0,children:(0,k.jsxs)(V.Z.Body,{className:"p-4",children:[(0,k.jsx)("i",{onClick:i,className:"fa-regular fa-circle-xmark  opacity-100 cursor-pointer position-absolute  ".concat(Y.Z.translateMiddle," ")}),(0,k.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[(0,k.jsx)("h6",{className:Y.Z.title,children:s}),(0,k.jsxs)("h6",{style:{marginTop:"10px"},children:[" ","Do you want to start the session?"]}),(0,k.jsx)("button",{type:"submit",className:'"btn '.concat(Y.Z.btnPrimary,' boarder-0"'),onClick:function(){var e={session_key:o};t((0,X.C6)(e)).then((function(e){i()}))},children:"Yes"})]}),(0,k.jsx)("div",{className:"d-flex justify-content-end"})]})})},Ve=i(45733),Ye=function(e){var n,i=e.type,o=e.props,d=e.activity_list,a=e.handleActivityDelete,r=e.setViewReport,m=e.handleToggleSessionOffline,f=e.nextSessionKey,h=(0,u.useState)(0),b=(0,s.Z)(h,2),j=b[0],x=b[1],y=(0,u.useState)(!1),S=(0,s.Z)(y,2),p=S[0],N=S[1],T=(0,v.v9)((function(e){return e.session})).lessonPlan,g=(0,c.s0)(),C=6===(null===o||void 0===o?void 0:o.offlineStatus),w=(0,u.useCallback)((function(e){null!==o&&void 0!==o&&o.lesson_key?g("/".concat(_.Z.EDIT_LESSON_PLAN,"/").concat(null===o||void 0===o?void 0:o.lesson_key),{state:{sessionId:null===o||void 0===o?void 0:o.session_key,studentId:null===o||void 0===o?void 0:o.student_key,subjectId:null===o||void 0===o?void 0:o.subject_id,typePlan:e,selectedTab:+(null===o||void 0===o?void 0:o.selectedTab),isReschedule:!0}}):g("/".concat(_.Z.EDIT_LESSON_PLAN),{state:{sessionId:null===o||void 0===o?void 0:o.session_key,studentId:null===o||void 0===o?void 0:o.student_key,subjectId:null===o||void 0===o?void 0:o.subject_id,typePlan:e,selectedTab:+(null===o||void 0===o?void 0:o.selectedTab),isReschedule:!0}})}),[g,o]),D=function(){var e="Create",n="Edit";if(1!==+(null===o||void 0===o?void 0:o.selectedTab))return 2===+(null===o||void 0===o?void 0:o.selectedTab)?1===(null===o||void 0===o?void 0:o.status)?(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)(F,{onButtonClick:function(){return r(!0)},label:"View homework report"}),5!==(null===o||void 0===o?void 0:o.offlineStatus)&&(0,k.jsx)(O,{onButtonClick:function(){return w(n)},label:"Edit homework plan"})]},null===o||void 0===o?void 0:o.id):0===(null===o||void 0===o?void 0:o.status)&&5!==(null===o||void 0===o?void 0:o.offlineStatus)?K(null===o||void 0===o?void 0:o.subject_id)&&(0,k.jsx)(O,{onButtonClick:function(){return w(e)},label:"Create homework plan"}):5!==(null===o||void 0===o?void 0:o.offlineStatus)&&(0,k.jsx)(O,{onButtonClick:function(){return w(n)},label:"Edit homework plan"}):3===+(null===o||void 0===o?void 0:o.selectedTab)&&1===(0,R.lR)(d)?(0,k.jsx)(F,{label:"View ".concat(i?"homework":"lesson"," report"),onButtonClick:function(){return r(!0)}}):null;if(C){if(f)return(0,k.jsx)(O,{onButtonClick:function(){g("/"+_.Z.SESSION_PAGE+"/"+f)},label:"Plan next session"})}else{if(null===o||void 0===o||!o.code)return 1===(null===o||void 0===o?void 0:o.status)&&5!==(null===o||void 0===o?void 0:o.offlineStatus)?(0,k.jsx)(O,{onButtonClick:function(){return w(n)},label:"Edit Lesson Plan"}):4===(null===o||void 0===o?void 0:o.offlineStatus)?(0,k.jsx)(O,{onButtonClick:function(){x(0),N(!0)},label:"Switch to online lesson"}):0===(null===o||void 0===o?void 0:o.status)&&5!==(null===o||void 0===o?void 0:o.offlineStatus)?(0,k.jsxs)(u.Fragment,{children:[K(null===o||void 0===o?void 0:o.subject_id)&&(0,k.jsx)(O,{onButtonClick:function(){return w(e)},label:"Create Lesson Plan"}),5!==(null===o||void 0===o?void 0:o.offlineStatus)&&(0,k.jsx)(O,{onButtonClick:function(){x(1),N(!0)},label:"Switch to offline lesson"})]},null===o||void 0===o?void 0:o.id):5!==(null===o||void 0===o?void 0:o.offlineStatus)&&(0,k.jsx)(O,{onButtonClick:function(){return w(n)},label:"Edit Lesson Plan"});if(f)return(0,k.jsx)(O,{onButtonClick:function(){g("/"+_.Z.SESSION_PAGE+"/"+f)},label:"Plan next session"})}};return(0,k.jsxs)(u.Fragment,{children:[3===+(null===o||void 0===o?void 0:o.selectedTab)&&(0,k.jsxs)("label",{id:M.Z.titleSection,children:[i?"Homework":"Lesson"," plan"]}),(0,k.jsx)("div",{className:q()(M.Z.sessionCardItemPara,M.Z.subjectCard),children:(0,k.jsx)("p",{className:"mb-0",children:function(){var e;return(0,l.Z)(new Set((null===o||void 0===o||null===(e=o.subject_id)||void 0===e?void 0:e.map((function(e){return 1===+e?z.pY.ENGLISH:2===+e?z.pY.MATHS:""})))||[])).sort().join(" & ")}()})}),(0,k.jsx)("div",{className:M.Z.sessionCardItemPara,children:(0,k.jsx)("p",{children:1===+(null===o||void 0===o?void 0:o.selectedTab)?null===o||void 0===o?void 0:o.description:2===+(null===o||void 0===o?void 0:o.selectedTab)?null===o||void 0===o?void 0:o.homework_description:3===+(null===o||void 0===o?void 0:o.selectedTab)&&0===i?null===o||void 0===o?void 0:o.description:null===o||void 0===o?void 0:o.homework_description})}),0===(0,R.lR)(d)&&3===+(null===o||void 0===o?void 0:o.selectedTab)?null:(0,k.jsxs)("div",{className:M.Z.sessionCardItemCoinDur,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("img",{alt:"coin-icon",src:t.e2}),(0,k.jsx)("label",{style:{fontSize:"12px"},children:0===(null===o||void 0===o||null===(n=o.activity_list)||void 0===n?void 0:n.length)?"-":[0===(0,G.Z)(null===o||void 0===o?void 0:o.activity_list)?0:"".concat(null===o||void 0===o?void 0:o.coins,"/").concat((0,G.Z)(null===o||void 0===o?void 0:o.activity_list))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("img",{alt:"clock-icon",src:t.SU}),(0,k.jsx)("label",{style:{fontSize:"12px"},children:null!==o&&void 0!==o&&o.duration?(0,Z.g)(null===o||void 0===o?void 0:o.duration):"-"})]})]}),(0,k.jsxs)("div",{className:M.Z.sessionCardItemStatus,children:[(0,k.jsx)("label",{className:5!==(null===o||void 0===o?void 0:o.offlineStatus)&&0===(0,R.lR)(d)?M.Z.notCompleted:1===(0,R.lR)(d)?M.Z.fullyCompleted:M.Z.partiallyCompleted,children:C?"Defer":(0,R.U6)(d,+(null===o||void 0===o?void 0:o.selectedTab),null===T||void 0===T?void 0:T.ses_status)}),null!==o&&void 0!==o&&o.is_lesson_sequential?(0,k.jsx)("img",{alt:"sequential-icon",src:t.V$}):(0,k.jsx)("img",{alt:"sequential-icon",src:t.u4})]}),(0,k.jsx)("div",{className:M.Z.sessionCardItemButtonContainer,children:(0,k.jsx)(D,{})},null===o||void 0===o?void 0:o.id),(0,k.jsx)("div",{style:null!==o&&void 0!==o&&o.code&&!f&&1===+(null===o||void 0===o?void 0:o.selectedTab)?{maxHeight:"calc(100% - 149px)"}:2===+(null===o||void 0===o?void 0:o.selectedTab)&&1===(null===o||void 0===o?void 0:o.status)?{maxHeight:"calc(100% - 269px)"}:{maxHeight:"calc(100% - 219px)"},className:3===+(null===o||void 0===o?void 0:o.selectedTab)?M.Z.sessionCardItemActivityCardSectionNoScroll:M.Z.sessionCardItemActivityCardSection,children:5!==(null===o||void 0===o?void 0:o.offlineStatus)&&(null===d||void 0===d?void 0:d.map((function(e,n){return(0,k.jsx)(L.Z,{handleActivityDelete:a,lesson_key:null===o||void 0===o?void 0:o.lesson_key,subject_id:+(null===e||void 0===e?void 0:e.fk_sub_id),values:e,type:i,sessionID:null===o||void 0===o?void 0:o.sessionId,studentID:null===o||void 0===o?void 0:o.studentId,handlePreview:function(){!function(e,n,i){var l=0===+n?"assessment":1===+n?"videos":5===+n?"worksheets":3===+n?"link":4===+n?"task":2===+n?"diagnostic":6===+n?"videos":7===+n?"lcms-worksheets":"",s="".concat("http://tutor.dev.mygooroo.io","/").concat(_.Z.SESSION_PAGE,"/").concat(null===o||void 0===o?void 0:o.session_key,"?sessionDetailedId=").concat(null===o||void 0===o?void 0:o.session_key,"&selectedTab=").concat(null===o||void 0===o?void 0:o.selectedTab,"&isReschedule=true"),t=6===+n?"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e,"?type=").concat(n,"&subject_id=").concat(i):7===+n?"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e,"?subject_id=").concat(i):"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e),d={studentID:null===o||void 0===o?void 0:o.student_key,subjectID:+i,isActivityPage:!1,activityNodeId:e,redirectUrl:s,tutorToken:H.Z.get(H.e.TOKEN)};H.Z.setStudent(H.e.STUDENT_DATA,JSON.stringify(d)),console.log({studentData:d,url:t}),window.open(t,"_self")}(e.pk_lesson_activity_key,null===e||void 0===e?void 0:e.activity_type,+(null===e||void 0===e?void 0:e.fk_sub_id))},handleMarkView:function(){!function(e,n,i){var l=5===+n?"worksheets":0===+n?"manual-marking":7===+n?"lcms-worksheets":"",s="".concat("http://tutor.dev.mygooroo.io","/").concat(_.Z.SESSION_PAGE,"/").concat(null===o||void 0===o?void 0:o.session_key,"?sessionDetailedId=").concat(null===o||void 0===o?void 0:o.session_key,"&selectedTab=").concat(null===o||void 0===o?void 0:o.selectedTab,"&isReschedule=true"),t=7===+n?"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e,"?subject_id=").concat(i):"".concat("https://student.dev.mygooroo.io","/").concat(l,"/").concat(e),d={studentID:null===o||void 0===o?void 0:o.student_key,subjectID:i,redirectUrl:s,manual:!0,tutorToken:H.Z.get(H.e.TOKEN)};H.Z.setStudent(H.e.STUDENT_DATA,JSON.stringify(d)),console.log({studentData:d,url:t}),window.open(t,"_self")}(e.pk_lesson_activity_key,null===e||void 0===e?void 0:e.activity_type,+(null===e||void 0===e?void 0:e.fk_sub_id))}},n)})))}),p?(0,k.jsx)(J,{show:p,onConfirm:function(){m(j),N(!1)},onHide:function(){return N(!1)},title:j?"Switch to offline":"Switch to online",message:j?"Do you want to switch the session to offline?":"Do you want to switch the session to online?"}):null]},null===o||void 0===o?void 0:o.id)},Je=function(e){var n,i,d,r,m,f,h=(0,v.v9)((function(e){return e.session})).lessonPlan,b=(0,v.v9)((function(e){return e.session.studentDetails})),j=b.pastSession,x=b.pastSession_sortOrder,y=b.pastSession_sortField,S=b.pastSessionLoading,p=(0,c.s0)(),N=(0,u.useState)(!1),T=(0,s.Z)(N,2),g=T[0],Z=T[1],C=(0,u.useState)(!1),w=(0,s.Z)(C,2),D=w[0],I=w[1],A=(0,u.useState)(!1),E=(0,s.Z)(A,2),L=E[0],B=E[1],P=(0,u.useState)(!1),O=(0,s.Z)(P,2),F=O[0],H=O[1],V=(0,u.useState)(0),Y=(0,s.Z)(V,2),J=Y[0],G=Y[1],K=(0,v.I0)(),U=function(n){G(n);var i={is_homework:n,lesson_key:null===e||void 0===e?void 0:e.lesson_key,student_key:null===e||void 0===e?void 0:e.student_key};h&&K((0,X.IZ)(i)).then((function(e){var n;200===(null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.statusCode)&&I(!0)}))};return(0,u.useEffect)((function(){if(null!==e&&void 0!==e&&e.student_key){var n={pk_student_key:null===e||void 0===e?void 0:e.student_key,sort_by:y,sort_order:x};K((0,X.ep)(n))}}),[x,y,K]),(0,k.jsxs)("div",{className:3===+(null===e||void 0===e?void 0:e.selectedTab)?M.Z.sessionCardItem:M.Z.advSessionCardItem,children:[(0,k.jsxs)("div",{className:M.Z.sessionCardItemUser,children:[(0,k.jsxs)("div",{onClick:function(){return function(){B(!0);var n={pk_student_key:null===e||void 0===e?void 0:e.student_key};K((0,X.ep)(n))}()},className:M.Z.user_v,children:[(0,k.jsx)("img",{alt:"",src:g?t.wO:null===e||void 0===e?void 0:e.userIcon,onError:function(){Z(!0)}}),(0,k.jsxs)("span",{id:3!==+(null===e||void 0===e?void 0:e.selectedTab)?M.Z.usernameOverFlowStyle:null!==e&&void 0!==e&&e.attendance?M.Z.usernameOverFlowStyle1:M.Z.usernameOverFlowStyle,children:[null===e||void 0===e?void 0:e.name," ",null===e||void 0===e?void 0:e.surname]})]}),3===+(null===e||void 0===e?void 0:e.selectedTab)&&null!==e&&void 0!==e&&e.attendance?(0,$.m)(null===e||void 0===e?void 0:e.attendance):null]}),3===+(null===e||void 0===e?void 0:e.selectedTab)&&(0,k.jsx)(u.Fragment,{children:(0,k.jsxs)("div",{className:M.Z.sessionDetailsCardItemSessionNameDetails,children:[(0,k.jsxs)("div",{className:M.Z.sessionDetailsCardItemSessionNameDetailsSection1,children:[(0,k.jsx)("label",{children:null===h||void 0===h||null===(n=h.tbl_session_time)||void 0===n?void 0:n.sest_name}),(0,k.jsx)("p",{children:null===h||void 0===h||null===(i=h.tbl_session_time)||void 0===i?void 0:i.sest_type})]}),(0,k.jsxs)("div",{className:M.Z.sessionDetailsCardItemSessionNameDetailsSection2,style:{justifyContent:"flex-end"},children:[(0,k.jsxs)("span",{children:[null!==h&&void 0!==h&&h.ses_date?a()(null===h||void 0===h?void 0:h.ses_date).format("DD MMM YYYY"):null," ","(",null!==h&&void 0!==h&&null!==(d=h.tbl_session_time)&&void 0!==d&&d.sest_day?(0,R.hJ)(null===h||void 0===h||null===(r=h.tbl_session_time)||void 0===r?void 0:r.sest_day):null,")"]}),(0,k.jsxs)("p",{children:[null!==h&&void 0!==h&&h.ses_start_time?(0,R.hK)(null===h||void 0===h?void 0:h.ses_start_time):"","-",null!==h&&void 0!==h&&h.ses_end_time?(0,R.hK)(null===h||void 0===h?void 0:h.ses_end_time):""," ","(",null!==h&&void 0!==h&&h.ses_start_time&&null!==h&&void 0!==h&&h.ses_end_time?(0,ie.w)(null===h||void 0===h?void 0:h.ses_start_time,null===h||void 0===h?void 0:h.ses_end_time):"-",")"]})]})]})},"header-".concat(null===e||void 0===e?void 0:e.id)),3===+(null===e||void 0===e?void 0:e.selectedTab)?(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)(Ye,{handleActivityDelete:null===e||void 0===e?void 0:e.handleActivityDelete,type:0,props:e,setViewReport:function(){return U(0)},activity_list:null===e||void 0===e||null===(m=e.activity_list)||void 0===m?void 0:m.filter((function(e){return!(null!==e&&void 0!==e&&e.marked_for_homework)}))},"lesson-".concat(null===e||void 0===e?void 0:e.id)),(0,k.jsx)("br",{}),(0,k.jsx)(Ye,{handleActivityDelete:null===e||void 0===e?void 0:e.handleActivityDelete,type:1,props:e,setViewReport:function(){return U(1)},activity_list:null===e||void 0===e||null===(f=e.activity_list)||void 0===f?void 0:f.filter((function(e){return null===e||void 0===e?void 0:e.marked_for_homework}))},"homework-".concat(null===e||void 0===e?void 0:e.id))]},null===e||void 0===e?void 0:e.id):(0,k.jsx)(Ye,{nextSessionKey:null===e||void 0===e?void 0:e.nextSessionKey,handleActivityDelete:null===e||void 0===e?void 0:e.handleActivityDelete,type:1===+(null===e||void 0===e?void 0:e.selectedTab)?0:1,activity_list:function(){var n,i,s=null!==e&&void 0!==e&&e.activity_list?(0,l.Z)(null===e||void 0===e?void 0:e.activity_list):[];return s=1===+(null===e||void 0===e?void 0:e.selectedTab)?null===(n=s)||void 0===n?void 0:n.filter((function(e){return!e.marked_for_homework})):2===+(null===e||void 0===e?void 0:e.selectedTab)&&(null===(i=s)||void 0===i?void 0:i.filter((function(e){return e.marked_for_homework})))}(),setViewReport:function(){return U(1===+(null===e||void 0===e?void 0:e.selectedTab)?0:1)},props:e,offlineStatus:null===e||void 0===e?void 0:e.offlineStatus,handleToggleSessionOffline:null===e||void 0===e?void 0:e.handleToggleSessionOffline},null===e||void 0===e?void 0:e.id),(0,k.jsx)(o.Z,{show:D,closeModal:function(){return I(!1)},title:"View ".concat(+J?"homework":"lesson"," report"),hide:function(){return I(!1)},modalBody:(0,W.Z)()}),L&&(0,k.jsx)(ee.Z,{student_key:null===e||void 0===e?void 0:e.student_key,subject_id:null===e||void 0===e?void 0:e.subject_id,subjectName:null===e||void 0===e?void 0:e.subjectName,modalForViewPastLessons:F,setModalForViewPastLessons:H,closeModal:B}),F?(0,k.jsx)(o.Z,{closeModal:function(){return H(!1)},show:F,title:"View past sessions",hide:function(){return H(!1)},modalBody:(0,ne.Z)(j,(function(e,n){var i=n.sortField,l=n.sortOrder;if("sort"===e)K((0,X.cJ)(i)),K((0,X._Y)(l))}),S,y,x,(function(e){B(!1),H(!1),p("/"+_.Z.SESSION_PAGE+"/"+e.pk_ses_key)}))}):null]})},Ge=function(e){var n=e.selectedTab,i=e.code,l=e.handleActivityDelete,s=e.handleToggleSessionOffline,o=e.isReschedule,t=(0,v.v9)((function(e){var n;return null===(n=e.session)||void 0===n?void 0:n.lessonPlan})),d=(0,u.useMemo)((function(){var e,n;return null!==t&&void 0!==t&&null!==(e=t.tbl_session_time)&&void 0!==e&&e.tbl_student_enrolments?null===t||void 0===t||null===(n=t.tbl_session_time)||void 0===n?void 0:n.tbl_student_enrolments:[]}));return(0,k.jsx)("div",{className:M.Z.sessionCardMainContainer,children:(null===d||void 0===d?void 0:d.length)>0&&(0,k.jsx)("div",{className:M.Z.sessionCardList,children:null===d||void 0===d?void 0:d.map((function(e,d){var a,v,c,r,_,m,f,h,b,j,x,y,S,p,N,T,g,Z,C,w,D,I,A,E,M,L,B,P,O,F;return(null===e||void 0===e?void 0:e.tbl_student)&&(0,k.jsx)(u.Fragment,{children:(0,k.jsx)(Je,{nextSessionKey:null===e||void 0===e||null===(a=e.tbl_student)||void 0===a||null===(v=a.next_session)||void 0===v?void 0:v.pk_ses_key,handleActivityDelete:l,code:i,selectedTab:n,getStatus:R.lR,getActivityStatus:R.U6,id:null===e||void 0===e?void 0:e.pk_enrol_key,lesson_key:null===e||void 0===e||null===(c=e.tbl_student)||void 0===c||null===(r=c.Lesson)||void 0===r?void 0:r.pk_lesson_key,userIcon:null===e||void 0===e||null===(_=e.tbl_student)||void 0===_?void 0:_.st_avatar,name:null===e||void 0===e||null===(m=e.tbl_student)||void 0===m?void 0:m.st_first_name,surname:null===e||void 0===e||null===(f=e.tbl_student)||void 0===f?void 0:f.st_surname,duration:null===e||void 0===e?void 0:e.totalDuration,coins:null!==e&&void 0!==e&&null!==(h=e.tbl_student)&&void 0!==h&&null!==(b=h.Lesson)&&void 0!==b&&b.coins_earned?null===e||void 0===e||null===(j=e.tbl_student)||void 0===j||null===(x=j.Lesson)||void 0===x?void 0:x.coins_earned:0,description:null===e||void 0===e||null===(y=e.tbl_student)||void 0===y||null===(S=y.Lesson)||void 0===S?void 0:S.description,homework_description:null===e||void 0===e||null===(p=e.tbl_student)||void 0===p||null===(N=p.Lesson)||void 0===N?void 0:N.homework_description,is_lesson_sequential:null===e||void 0===e||null===(T=e.tbl_student)||void 0===T||null===(g=T.Lesson)||void 0===g?void 0:g.is_lesson_sequential,attendance:null===e||void 0===e?void 0:e.stu_status,status:(0,R.lR)(null===e||void 0===e||null===(Z=e.tbl_student)||void 0===Z||null===(C=Z.Lesson)||void 0===C?void 0:C.LessonActivities),activity_list:null!==e&&void 0!==e&&null!==(w=e.tbl_student)&&void 0!==w&&null!==(D=w.Lesson)&&void 0!==D&&D.LessonActivities?null===e||void 0===e||null===(I=e.tbl_student)||void 0===I||null===(A=I.Lesson)||void 0===A?void 0:A.LessonActivities:[],session_key:null===t||void 0===t?void 0:t.pk_ses_key,student_key:null===e||void 0===e||null===(E=e.tbl_student)||void 0===E?void 0:E.pk_student_key,subject_id:null===e||void 0===e||null===(M=e.tbl_enrolment_subjects)||void 0===M?void 0:M.map((function(e){return null===e||void 0===e?void 0:e.fk_sub_id})),subjectName:null===e||void 0===e||null===(L=e.tbl_enrolment_subjects)||void 0===L?void 0:L.map((function(e){return null===e||void 0===e?void 0:e.subject_name})),offlineStatus:(null===e||void 0===e||null===(B=e.tbl_student)||void 0===B||null===(P=B.tbl_session_attendances)||void 0===P?void 0:P.length)>0&&(null===e||void 0===e||null===(O=e.tbl_student)||void 0===O||null===(F=O.tbl_session_attendances[0])||void 0===F?void 0:F.attendance_status),handleToggleSessionOffline:function(n){var i;return s(n,null===t||void 0===t?void 0:t.pk_ses_key,null===e||void 0===e||null===(i=e.tbl_student)||void 0===i?void 0:i.pk_student_key)},isReschedule:o})},d)}))})})},Ke=i(5618),Ue=i(26672),qe=function(){var e,n,i=(0,u.useState)(!1),d=(0,s.Z)(i,2),m=d[0],f=d[1],h=(0,u.useState)({student:[],coin:"",reason:""}),b=(0,s.Z)(h,2),j=b[0],x=b[1],y=(0,u.useState)(null),S=(0,s.Z)(y,2),p=S[0],T=S[1],g=(0,u.useState)(!1),Z=(0,s.Z)(g,2),C=Z[0],I=Z[1],A=(0,u.useState)(!1),M=(0,s.Z)(A,2),L=M[0],B=M[1],P=(0,u.useState)(!1),O=(0,s.Z)(P,2),F=O[0],H=O[1],V=(0,u.useState)(!1),Y=(0,s.Z)(V,2),J=Y[0],G=Y[1],K=(0,v.v9)((function(e){return e.session})),U=K.lessonPlan,z=K.sessionStudents,Q=localStorage.getItem("sessionData"),$=(0,u.useState)([]),W=(0,s.Z)($,2),ee=W[0],ne=W[1],le=(0,u.useState)([]),oe=(0,s.Z)(le,2),te=oe[0],de=oe[1],ae=(0,u.useState)(!0),ue=(0,s.Z)(ae,2),ve=ue[0],ce=ue[1],re=(0,u.useState)(!1),_e=(0,s.Z)(re,2),Be=_e[0],Pe=_e[1],Oe=(0,u.useState)(Q&&null!==JSON&&void 0!==JSON&&JSON.parse(Q)?JSON.parse(Q):null),Fe=(0,s.Z)(Oe,2),Ye=Fe[0],Je=Fe[1],qe=(0,c.UO)(),ze=(0,c.s0)(),Qe=(0,v.I0)(),$e=(0,c.TH)(),We=(0,u.useMemo)((function(){return(null===Ve.Z||void 0===Ve.Z?void 0:Ve.Z.parse($e.search))||{}}),[$e.search]),Xe=localStorage.getItem("sessionTabId"),en=(null===$e||void 0===$e||null===(e=$e.state)||void 0===e?void 0:e.isReschedule)||"true"===(null===We||void 0===We?void 0:We.isReschedule)?1:0,nn=(0,u.useState)(1),ln=(0,s.Z)(nn,2),sn=ln[0],on=ln[1];(0,u.useMemo)((function(){var e,n;on(+Xe?(null===$e||void 0===$e||null===(e=$e.state)||void 0===e?void 0:e.selectedTab)===+Xe?null===$e||void 0===$e||null===(n=$e.state)||void 0===n?void 0:n.selectedTab:+(null===We||void 0===We?void 0:We.selectedTab)===+Xe?+(null===We||void 0===We?void 0:We.selectedTab):+Xe:1)}),[Xe,null===$e||void 0===$e||null===(n=$e.state)||void 0===n?void 0:n.selectedTab,null===We||void 0===We?void 0:We.selectedTab]);var tn=(0,u.useCallback)((function(e){ce(!0);var n={sessionId:e||(qe.sessionDetailedId||(null===We||void 0===We?void 0:We.sessionDetailedId)),homework:2===+sn?1:0,previous:3===+sn?1:0};en?Qe((0,X.C5)(n)).then((function(e){var n,i,l,s,o,t;if(1===+sn||2===+sn)Je(null===e||void 0===e||null===(n=e.payload)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.session),(null===e||void 0===e||null===(l=e.payload)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.session)&&localStorage.setItem("sessionData",JSON.stringify(null===e||void 0===e||null===(o=e.payload)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.session)),ce(!1);else if(3===+sn){var d,a,u,v,c;null===e||void 0===e||null===(d=e.payload)||void 0===d||null===(a=d.data)||void 0===a||null===(u=a.session)||void 0===u||null===(v=u.tbl_session_time)||void 0===v||null===(c=v.tbl_student_enrolments)||void 0===c||c.map((function(e,n){var i,l,s,o,t,d,a;0===(null!==e&&void 0!==e&&null!==(i=e.tbl_student)&&void 0!==i&&null!==(l=i.Lesson)&&void 0!==l&&l.LessonActivities?null===e||void 0===e||null===(s=e.tbl_student)||void 0===s||null===(o=s.Lesson)||void 0===o||null===(t=o.LessonActivities)||void 0===t||null===(d=t.map((function(e,n){return!e.marked_for_homework})))||void 0===d?void 0:d.length:0)&&r.Am.warn("No activities assigned to ".concat(null===e||void 0===e||null===(a=e.tbl_student)||void 0===a?void 0:a.st_first_name),{autoClose:2e3})})),ce(!1)}})):Qe((0,X.Lz)(n)).then((function(e){var n,i,l,s,o,t;if(1===+sn||2===+sn)Je(null===e||void 0===e||null===(n=e.payload)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.session),(null===e||void 0===e||null===(l=e.payload)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.session)&&localStorage.setItem("sessionData",JSON.stringify(null===e||void 0===e||null===(o=e.payload)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.session)),ce(!1);else if(3===+sn){var d,a,u,v,c;null===e||void 0===e||null===(d=e.payload)||void 0===d||null===(a=d.data)||void 0===a||null===(u=a.session)||void 0===u||null===(v=u.tbl_session_time)||void 0===v||null===(c=v.tbl_student_enrolments)||void 0===c||c.map((function(e,n){var i,l,s,o,t,d,a;0===(null!==e&&void 0!==e&&null!==(i=e.tbl_student)&&void 0!==i&&null!==(l=i.Lesson)&&void 0!==l&&l.LessonActivities?null===e||void 0===e||null===(s=e.tbl_student)||void 0===s||null===(o=s.Lesson)||void 0===o||null===(t=o.LessonActivities)||void 0===t||null===(d=t.map((function(e,n){return!e.marked_for_homework})))||void 0===d?void 0:d.length:0)&&r.Am.warn("No activities assigned to ".concat(null===e||void 0===e||null===(a=e.tbl_student)||void 0===a?void 0:a.st_first_name),{autoClose:2e3})})),ce(!1)}}))}),[sn]),dn=function(){Qe((0,X.j7)(null===U||void 0===U?void 0:U.pk_ses_key))};(0,u.useEffect)((function(){4!==+sn?tn(null===qe||void 0===qe?void 0:qe.sessionDetailedId):4===+sn&&(ce(!0),Qe((0,X.P_)({session_id:(null===qe||void 0===qe?void 0:qe.sessionDetailedId)||(null===We||void 0===We?void 0:We.sessionDetailedId),type:en?1:0})).then((function(e){var n,i,l,s,o;T(null===e||void 0===e||null===(n=e.payload)||void 0===n||null===(i=n.data)||void 0===i||null===(l=i.studentDetails)||void 0===l||null===(s=l.tbl_session_time)||void 0===s||null===(o=s.tbl_student_enrolments)||void 0===o?void 0:o.length),ce(!1)})));var e=setInterval((function(){1===+sn&&function(e){if(1===+sn&&$e.pathname.includes("/session/")){var n={sessionId:e,homework:0,previous:0};Qe(en?(0,X.C5)(n):(0,X.Lz)(n))}}(qe.sessionDetailedId)}),1e4);return function(){return clearInterval(e)}}),[sn,qe.sessionDetailedId,en]);var an=function(e,n){var i=[];i.push(n);var l={lesson_key:e,activities:i};Qe((0,X.cC)(l)).then((function(e){var n;200===(null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.statusCode)&&(r.Am.success("Deleted Successfully"),tn())}))},un=function(e){var n=e.selected,i=e.setSelected;return(0,k.jsx)("div",{className:De,children:null===fe.J$||void 0===fe.J$?void 0:fe.J$.map((function(e,l){return(0,k.jsxs)("div",{onClick:function(){i(null===e||void 0===e?void 0:e.id),localStorage.setItem("sessionTabId",null===e||void 0===e?void 0:e.id)},className:+n===(null===e||void 0===e?void 0:e.id)?Ae:Ie,children:[(0,k.jsx)("label",{children:null===e||void 0===e?void 0:e.name}),null!==e&&void 0!==e&&e.count&&p?(0,k.jsxs)("label",{children:[" (",p,")"]}):null]},l)}))})},vn=function(){var e,n,i;if((null===Ye||void 0===Ye||null===(e=Ye.tbl_session_time)||void 0===e||null===(n=e.tbl_student_enrolments)||void 0===n?void 0:n.length)>0)return(0,Ke.Z)(null===Ye||void 0===Ye||null===(i=Ye.tbl_session_time)||void 0===i?void 0:i.tbl_student_enrolments)},cn=function(){var e,n,i=null===U||void 0===U||null===(e=U.tbl_session_time)||void 0===e||null===(n=e.tbl_student_enrolments)||void 0===n?void 0:n.every((function(e){var n,i;return null===e||void 0===e||null===(n=e.tbl_student)||void 0===n||null===(i=n.tbl_session_attendances)||void 0===i?void 0:i.every((function(e){return 6===(null===e||void 0===e?void 0:e.attendance_status)}))}));return i},rn=function(){if(cn())return!1;Pe(!0)},_n=function(){var e,n,i,l,s;return(0,k.jsxs)("div",{className:be,children:[(0,k.jsxs)("div",{className:je,children:[(0,k.jsxs)("div",{className:xe,children:[(0,k.jsx)("div",{className:ye,children:(0,k.jsx)("img",{onClick:function(){return ze("/"+_.Z.SESSION_PAGE)},alt:"session-left-arrow-icon",src:t.vJ})}),(0,k.jsx)("div",{className:Se,children:(0,k.jsx)("label",{children:null===Ye||void 0===Ye||null===(e=Ye.tbl_session_time)||void 0===e?void 0:e.sest_name})})]}),(0,k.jsxs)("div",{className:Ze,children:[(0,k.jsx)("div",{className:Se,children:(0,k.jsx)("p",{children:null===Ye||void 0===Ye||null===(n=Ye.tbl_session_time)||void 0===n?void 0:n.sest_type})}),(0,k.jsxs)("div",{onClick:function(){return null!==Ye&&void 0!==Ye&&Ye.ses_is_completed?r.Am.error("Session is completed"):I(!0)},className:Ce,children:[(0,k.jsx)("img",{alt:"coin-icon",src:t.e2}),(0,k.jsx)("label",{children:"Award Coins"})]}),!(null!==Ye&&void 0!==Ye&&Ye.ses_is_completed)&&(null!==Ye&&void 0!==Ye&&Ye.ses_status?(0,k.jsxs)("div",{onClick:function(){B(!0),dn()},className:Ce,children:[(0,k.jsx)("img",{alt:"stop-session-icon",src:t.sT}),(0,k.jsx)("label",{children:"End Session"})]}):(0,k.jsxs)("div",{onClick:function(){rn()},className:q()(cn()?we:"",Ce),children:[(0,k.jsx)("img",{alt:"start-session-icon",src:t.Th}),(0,k.jsx)("label",{children:"Start Session"})]}))]})]}),(0,k.jsxs)("div",{className:Me,children:[(0,k.jsxs)("div",{className:ke,children:[(0,k.jsxs)("div",{className:Ne,children:[(0,k.jsx)("img",{alt:"calendar-icon",src:t.Qu}),(0,k.jsxs)("div",{className:ge,children:[(0,k.jsx)("label",{children:"Date"}),(0,k.jsxs)("p",{children:[Ye?a()(null===Ye||void 0===Ye?void 0:Ye.ses_date).format("DD MMM YYYY"):null," ","(",Ye?(0,R.hJ)(null===Ye||void 0===Ye||null===(i=Ye.tbl_session_time)||void 0===i?void 0:i.sest_day):null,")"]})]})]}),(0,k.jsxs)("div",{className:Ne,children:[(0,k.jsx)("img",{alt:"time-icon",src:t.wZ}),(0,k.jsxs)("div",{className:ge,children:[(0,k.jsx)("label",{children:"Time"}),(0,k.jsxs)("p",{children:[Ye?(0,R.hK)(null===Ye||void 0===Ye?void 0:Ye.ses_start_time):null," -"," ",Ye?(0,R.hK)(null===Ye||void 0===Ye?void 0:Ye.ses_end_time):null]})]})]}),(0,k.jsxs)("div",{className:Ne,children:[(0,k.jsx)("img",{alt:"duration-icon",src:t.xy}),(0,k.jsxs)("div",{className:ge,children:[(0,k.jsx)("label",{children:"Duration"}),(0,k.jsxs)("p",{children:[null!==Ye&&void 0!==Ye&&Ye.ses_start_time&&null!==Ye&&void 0!==Ye&&Ye.ses_end_time?(0,ie.w)(null===Ye||void 0===Ye?void 0:Ye.ses_start_time,null===Ye||void 0===Ye?void 0:Ye.ses_end_time):"-"," "]})]})]}),(0,k.jsxs)("div",{className:Ne,children:[(0,k.jsx)("div",{className:Te,children:(0,k.jsx)(Ue.Mp$,{})}),(0,k.jsxs)("div",{className:ge,children:[(0,k.jsx)("label",{children:"Subject"}),(0,k.jsx)("p",{children:vn()})]})]})]}),(0,k.jsx)("div",{style:{backgroundColor:null===(l=Re(Ye))||void 0===l?void 0:l.color},className:pe,children:(0,k.jsx)("label",{children:null===(s=Re(Ye))||void 0===s?void 0:s.status})})]})]})},mn=function(){var e,n,i,l,s;return(0,k.jsxs)("div",{className:be,children:[(0,k.jsxs)("div",{className:je,children:[(0,k.jsxs)("div",{className:xe,children:[(0,k.jsx)("div",{className:ye,children:(0,k.jsx)("img",{onClick:function(){return ze("/"+_.Z.SESSION_PAGE)},alt:"session-left-arrow-icon",src:t.vJ})}),(0,k.jsx)("div",{className:Se,children:(0,k.jsx)("label",{children:null===Ye||void 0===Ye||null===(e=Ye.tbl_session_time)||void 0===e?void 0:e.sest_name})})]}),(0,k.jsxs)("div",{className:Ze,children:[(0,k.jsx)("div",{className:Se,children:(0,k.jsx)("p",{children:null===Ye||void 0===Ye||null===(n=Ye.tbl_session_time)||void 0===n?void 0:n.sest_type})}),(0,k.jsxs)("div",{onClick:function(){return null!==Ye&&void 0!==Ye&&Ye.ses_is_completed?r.Am.error("Session is completed"):I(!0)},className:Ce,children:[(0,k.jsx)("img",{alt:"coin-icon",src:t.e2}),(0,k.jsx)("label",{children:"Award Coins"})]}),!(null!==Ye&&void 0!==Ye&&Ye.ses_is_completed)&&(null!==Ye&&void 0!==Ye&&Ye.ses_status?(0,k.jsxs)("div",{onClick:function(){B(!0),dn()},className:Ce,children:[(0,k.jsx)("img",{alt:"stop-session-icon",src:t.sT}),(0,k.jsx)("label",{children:"End Session"})]}):(0,k.jsxs)("div",{onClick:function(){rn()},className:q()(cn()?we:"",Ce),children:[(0,k.jsx)("img",{alt:"start-session-icon",src:t.Th}),(0,k.jsx)("label",{children:"Start Session"})]}))]})]}),(0,k.jsxs)("div",{className:Me,children:[(0,k.jsxs)("div",{className:ke,children:[(0,k.jsxs)("div",{className:Ne,children:[(0,k.jsx)("img",{alt:"calendar-icon",src:t.Qu}),(0,k.jsxs)("div",{className:ge,children:[(0,k.jsx)("label",{children:"Date"}),(0,k.jsxs)("p",{children:[Ye?a()(null===Ye||void 0===Ye?void 0:Ye.ses_date).format("DD MMM YYYY"):null," ","(",Ye?(0,R.hJ)(null===Ye||void 0===Ye||null===(i=Ye.tbl_session_time)||void 0===i?void 0:i.sest_day):null,")"]})]})]}),(0,k.jsxs)("div",{className:Ne,children:[(0,k.jsx)("img",{alt:"time-icon",src:t.wZ}),(0,k.jsxs)("div",{className:ge,children:[(0,k.jsx)("label",{children:"Time"}),(0,k.jsxs)("p",{children:[Ye?(0,R.hK)(null===Ye||void 0===Ye?void 0:Ye.ses_start_time):null," -"," ",Ye?(0,R.hK)(null===Ye||void 0===Ye?void 0:Ye.ses_end_time):null]})]})]}),(0,k.jsxs)("div",{className:Ne,children:[(0,k.jsx)("img",{alt:"duration-icon",src:t.xy}),(0,k.jsxs)("div",{className:ge,children:[(0,k.jsx)("label",{children:"Duration"}),(0,k.jsxs)("p",{children:[null!==Ye&&void 0!==Ye&&Ye.ses_start_time&&null!==Ye&&void 0!==Ye&&Ye.ses_end_time?(0,ie.w)(null===Ye||void 0===Ye?void 0:Ye.ses_start_time,null===Ye||void 0===Ye?void 0:Ye.ses_end_time):"-"," "]})]})]})]}),(0,k.jsx)("div",{style:{backgroundColor:null===(l=Re(Ye))||void 0===l?void 0:l.color},className:pe,children:(0,k.jsx)("label",{children:null===(s=Re(Ye))||void 0===s?void 0:s.status})})]})]})},fn=(0,u.useCallback)((function(e,n,i){var l={session_key:n,student_key:i,status:e};Qe((0,X.i5)(l)).then((function(e){var n,i;200===(null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.statusCode)?(r.Am.success(null===e||void 0===e||null===(i=e.payload)||void 0===i?void 0:i.message),tn()):r.Am.error("Something went wrong")}))}),[Qe]);return(0,k.jsxs)("div",{className:he,children:[en?(0,k.jsx)(mn,{}):(0,k.jsx)(_n,{}),(0,k.jsx)(un,{selected:+sn,setSelected:on}),ve?(0,k.jsx)("div",{className:Le}):(0,k.jsx)("div",{className:Ee,children:function(){var e,n,i;return 4===+sn?(0,k.jsx)(me,{isReschedule:en}):null!==$e&&void 0!==$e&&null!==(e=$e.state)&&void 0!==e&&e.isReschedule||"true"===(null===We||void 0===We?void 0:We.isReschedule)?(0,k.jsx)(Ge,{handleActivityDelete:function(e,n){return an(e,n)},code:null===(n=Re(Ye))||void 0===n?void 0:n.code,selectedTab:+sn,handleToggleSessionOffline:function(e,n,i){return fn(e,n,i)},isReschedule:!0}):(0,k.jsx)(se,{handleActivityDelete:function(e,n){return an(e,n)},code:null===(i=Re(Ye))||void 0===i?void 0:i.code,selectedTab:+sn,handleToggleSessionOffline:function(e,n,i){return fn(e,n,i)}})}()}),(0,k.jsx)(o.Z,{closeModal:function(){I(!1),x({student:[],coin:"",reason:""})},show:C,hide:function(){!function(e){var n,i,l,s,o,t=null===Ye||void 0===Ye||null===(n=Ye.tbl_session_time)||void 0===n||null===(i=n.tbl_student_enrolments)||void 0===i?void 0:i.map((function(e){var n,i,l;return{label:(null===e||void 0===e||null===(n=e.tbl_student)||void 0===n?void 0:n.st_first_name)+" "+(null===e||void 0===e||null===(i=e.tbl_student)||void 0===i?void 0:i.st_surname),value:null===e||void 0===e||null===(l=e.tbl_student)||void 0===l?void 0:l.pk_student_key}})),d=0===(null===e||void 0===e||null===(l=e.student)||void 0===l||null===(s=l[0])||void 0===s?void 0:s.value)?t.map((function(e){return e.value})):null===(o=e.student)||void 0===o?void 0:o.map((function(e){return e.value}));if((null===d||void 0===d?void 0:d.length)>0&&null!==e&&void 0!==e&&e.coin){var a;f(!0);var u={students:d,coins_earned:+(null===e||void 0===e?void 0:e.coin),remarks:(null===e||void 0===e||null===(a=e.reason)||void 0===a?void 0:a.trim())||""};Qe((0,X.sB)(u)).then((function(e){f(!1),I(!1),H(!0),x({student:[],reason:"",coin:""})}))}else 0===(null===d||void 0===d?void 0:d.length)?r.Am.error("Please select student name "):null!==e&&void 0!==e&&e.coin||r.Am.error("Please add coins ")}(j)},title:"Award coin to",modalBody:E(Ye,x,j),btnPrimary:m?"Adding...":"Award",isDisable:m}),(0,k.jsx)(o.Z,{closeModal:function(){return H(!1)},show:!!F,hide:function(e){H(!1),0===e?ze("/"+_.Z.SESSION_PAGE):1===e&&(ze("/"+_.Z.DASHBOARD_PAGE),window.location.reload())},title:"Award coins to",modalBody:N(),footerClassName:"flex flex-row justify-content-center",cancelBtn:"Back to session",cancelBtnClassName:"order-1",btnPrimary2ClassName:"order-2",btnPrimary2:"Go to home"}),(0,k.jsx)(o.Z,{closeModal:function(){return B(!1)},show:L,hide:function(){return function(){var e,n,i,s,o=null!==z&&void 0!==z&&null!==(e=z.tbl_session_time)&&void 0!==e&&e.tbl_student_enrolments&&(null===z||void 0===z||null===(n=z.tbl_session_time)||void 0===n||null===(i=n.tbl_student_enrolments)||void 0===i?void 0:i.length)>0?(0,l.Z)(null===z||void 0===z||null===(s=z.tbl_session_time)||void 0===s?void 0:s.tbl_student_enrolments):[];if((null===o||void 0===o?void 0:o.length)===(null===ee||void 0===ee?void 0:ee.length)){var t,d,a={session_id:null===z||void 0===z?void 0:z.pk_ses_key,studentsAttended:null===ee||void 0===ee||null===(t=ee.filter((function(e){return 1===e.attendance_id})))||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.student_key})),studentsUnattended:null===ee||void 0===ee||null===(d=ee.filter((function(e){return 1!==e.attendance_id})))||void 0===d?void 0:d.map((function(e){return null===e||void 0===e?void 0:e.student_key})),activities:null===te||void 0===te?void 0:te.map((function(e,n){var i;return null===e||void 0===e||null===(i=e.activities)||void 0===i?void 0:i.map((function(e,n){return null===e||void 0===e?void 0:e.pk_lesson_activity_key}))[0]}))};Qe((0,X.CQ)(a)).then((function(e){var n;200===(null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.statusCode)?Qe((0,X.E_)(null===z||void 0===z?void 0:z.pk_ses_key)).then((function(e){B(!1),G(!0),tn()})):r.Am.error("Something went wrong")}))}else null===r.Am||void 0===r.Am||r.Am.error("Please mark attendance for all students")}()},title:"End Session",modalBody:(0,k.jsx)(w,{attendance:ee,setAttendance:ne,activityList:te,setActivityList:de}),btnPrimary:"End Session"}),(0,k.jsx)(o.Z,{closeModal:function(){return G(!1)},show:J,hide:function(e){0===e?(ze("/"+_.Z.DASHBOARD_PAGE),window.location.reload()):1===e&&ze("/"+_.Z.SESSION_PAGE),G(!1),tn()},title:"Session ended",modalBody:(0,k.jsx)(D,{}),btnPrimary:"Go to home",btnPrimary2:"Back to Session"}),(0,k.jsx)(He,{session_key:null===Ye||void 0===Ye?void 0:Ye.pk_ses_key,show:Be,onHide:function(){Pe(!1),tn()},title:"Start session"})]})}}}]);