"use strict";(self.webpackChunksea_tutor_react=self.webpackChunksea_tutor_react||[]).push([[160],{773:function(e,t,n){n.d(t,{Z:function(){return _}});n(47313);var i=n(16707),l=n(82020),o=n(68642),s=n(12181),a=n(9327),d="CommonModal_modalTitle__flh55",r="CommonModal_modalContainer__oIlzs",u="CommonModal_btn__cr49q",c=n(46123),v=n.n(c),m=n(46417);var _=function(e){var t=e.show,n=e.hide,c=e.title,_=e.modalBody,p=e.btnPrimary,S=e.btnPrimary2,h=e.cancelBtn,D=e.closeModal,x=e.isFooter,f=void 0===x||x,j=e.isDisable,b=void 0!==j&&j,g=(e.onClickbtnPrimary2,e.btnPrimaryClassName),y=e.btnPrimary2ClassName,N=e.cancelBtnClassName,M=e.footerClassName;return(0,m.jsx)("div",{children:(0,m.jsxs)(i.Z,{className:r,centered:!0,isOpen:t,toggle:D,children:[(0,m.jsx)(l.Z,{toggle:D,children:(0,m.jsx)("label",{className:d,children:c})}),(0,m.jsx)(o.Z,{children:_}),f?(0,m.jsxs)(s.Z,{className:M,children:[p&&(0,m.jsx)(a.Z,{color:"danger",onClick:function(){return n(0)},disabled:b,className:v()(u,g),children:p}),S&&(0,m.jsx)(a.Z,{className:v()(u,y),color:"danger",onClick:function(){return n(1)},children:S}),h&&(0,m.jsx)(a.Z,{outline:!0,color:"danger",onClick:n,className:v()(u,N),children:h})]}):null]})})}},46311:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(46123),l=n.n(i),o=(n(47313),"TableSwitch_btn__Qspcn"),s=n(46417),a=function(e){var t=e.title,n=e.bg;return(0,s.jsx)("button",{className:l()(o,n,"text-uppercase"),children:t})}},60390:function(e,t,n){n.d(t,{w:function(){return o}});var i=n(70816),l=n.n(i),o=function(e,t){if(e&&t){var n=l()(e,"hh:mm"),i=l()(t,"hh:mm"),o=l().duration(i.diff(n)).asMinutes();return o<0?null:"".concat(Math.floor(o)," mins")}return null}},88321:function(e,t,n){n.d(t,{Z:function(){return c}});n(47313);var i={translateMiddle:"DeleteModal_translateMiddle__aE+zO",title:"DeleteModal_title__LYpyp",btnCustom:"DeleteModal_btnCustom__b58cK",btnPrimary:"DeleteModal_btnPrimary__FZV6y",btnDiv:"DeleteModal_btnDiv__X6rIf"},l=n(54972),o=n(16707),s=n(68642),a=n(9327),d=n(46123),r=n.n(d),u=n(46417),c=function(e){var t=e.show,n=e.onHide,d=e.msg,c=void 0===d?"Are you sure you want to delete this activity?":d,v=e.deleteConfirmation,m=e.isLoad;return(0,u.jsx)(o.Z,{centered:!0,isOpen:t,toggle:n,className:i.documentModal,children:(0,u.jsxs)(s.Z,{className:"p-4",children:[(0,u.jsx)("i",{onClick:n,className:"fa-regular fa-circle-xmark  opacity-100 cursor-pointer position-absolute  ".concat(i.translateMiddle," ")}),(0,u.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[(0,u.jsx)(l.j6O,{size:70,color:"#D83D59"}),(0,u.jsx)("span",{className:i.title,children:"Delete Confirmation"}),(0,u.jsx)("h6",{style:{marginTop:"10px"},children:c}),(0,u.jsxs)("div",{className:i.btnDiv,children:[(0,u.jsx)(a.Z,{type:"submit",onClick:v,className:r()(i.btnCustom,i.btnPrimary),disabled:m,children:m?"Deleting...":"Yes"}),(0,u.jsx)(a.Z,{outline:!0,color:"danger",onClick:n,className:r()(i.btnCustom),children:"Cancel"})]})]})]})})}},68366:function(e,t,n){n.d(t,{Z:function(){return le}});var i=n(29439),l=n(47313),o={modalStudentMainContainer:"ModalForStudentDetails_modalStudentMainContainer__ELQka",modalStudentContainer:"ModalForStudentDetails_modalStudentContainer__tlNuG",modalStudentHeader:"ModalForStudentDetails_modalStudentHeader__fXG+7",modalStudentHeaderIcon:"ModalForStudentDetails_modalStudentHeaderIcon__y-Ipc",modalStudentHeaderName:"ModalForStudentDetails_modalStudentHeaderName__p6Dzw",name:"ModalForStudentDetails_name__ATsA9",level:"ModalForStudentDetails_level__N7-kA",level2:"ModalForStudentDetails_level2__nIT+x",modalStudentHeaderClose:"ModalForStudentDetails_modalStudentHeaderClose__MQsTp",modalStudentHeaderSectionContent:"ModalForStudentDetails_modalStudentHeaderSectionContent__idSnf",label1:"ModalForStudentDetails_label1__KP-RY",label2:"ModalForStudentDetails_label2__NhXpx",label0:"ModalForStudentDetails_label0__EqCKP",modalStudentHeaderSectionContentDetails1:"ModalForStudentDetails_modalStudentHeaderSectionContentDetails1__bfjqt",modalStudentHeaderSectionContentDetails1Item1:"ModalForStudentDetails_modalStudentHeaderSectionContentDetails1Item1__xAyqB",modalStudentHeaderSectionContentDetails1Item2:"ModalForStudentDetails_modalStudentHeaderSectionContentDetails1Item2__i5uNZ",modalStudentHeaderSectionContent1:"ModalForStudentDetails_modalStudentHeaderSectionContent1__nCaGx",modalStudentSubHeaderSection:"ModalForStudentDetails_modalStudentSubHeaderSection__Dxovc",modelStudentSubHeaderItemSelected:"ModalForStudentDetails_modelStudentSubHeaderItemSelected__7C0+u",modelStudentSubHeaderItem:"ModalForStudentDetails_modelStudentSubHeaderItem__sl3lu",modelStudentSubSectionNotesContainer:"ModalForStudentDetails_modelStudentSubSectionNotesContainer__v7ru6",modelStudentSubSectionNotesSection:"ModalForStudentDetails_modelStudentSubSectionNotesSection__qF-Gk",modelStudentSubSectionNotesItem:"ModalForStudentDetails_modelStudentSubSectionNotesItem__pXrO2",modelStudentSubSectionNotesItem1:"ModalForStudentDetails_modelStudentSubSectionNotesItem1__seDQ-",modelStudentSubSectionNotesItem2:"ModalForStudentDetails_modelStudentSubSectionNotesItem2__wevhe",modelStudentDetailsReportSectionMainContainer:"ModalForStudentDetails_modelStudentDetailsReportSectionMainContainer__F0qkS",modelStudentDetailsReportSectionHeader1:"ModalForStudentDetails_modelStudentDetailsReportSectionHeader1__XgAFk",modelStudentDetailsReportSectionHeader2:"ModalForStudentDetails_modelStudentDetailsReportSectionHeader2__zM+Bl",modelStudentDetailsReportSectionHeader2Item:"ModalForStudentDetails_modelStudentDetailsReportSectionHeader2Item__JG6uo",modelStudentDetailsReportSectionHeader3:"ModalForStudentDetails_modelStudentDetailsReportSectionHeader3__fGhVD",modelStudentDetailsReportSectionStudentStatus:"ModalForStudentDetails_modelStudentDetailsReportSectionStudentStatus__BK3UR",modelStudentDetailsReportSectionTopicsSection:"ModalForStudentDetails_modelStudentDetailsReportSectionTopicsSection__I-UhN",modelStudentDetailsReportSectionTopicsSection1:"ModalForStudentDetails_modelStudentDetailsReportSectionTopicsSection1__B+bFh",modelStudentDetailsReportSectionTopicsDiagram1:"ModalForStudentDetails_modelStudentDetailsReportSectionTopicsDiagram1__tT3Sp",modelStudentDetailsReportSectionTopicsDiagram2:"ModalForStudentDetails_modelStudentDetailsReportSectionTopicsDiagram2__kOsSs",modelStudentDetailsReportSectionTopicsDiagram3:"ModalForStudentDetails_modelStudentDetailsReportSectionTopicsDiagram3__2GGA9",modelStudentDetailsReportSectionTopicsDiagram4:"ModalForStudentDetails_modelStudentDetailsReportSectionTopicsDiagram4__lBn4A",modelStudentDetailsReportTopicsDiagramDesc:"ModalForStudentDetails_modelStudentDetailsReportTopicsDiagramDesc__RuRcd",label01:"ModalForStudentDetails_label01__N0sV5",label02:"ModalForStudentDetails_label02__LdRLK",label03:"ModalForStudentDetails_label03__cfecG",label04:"ModalForStudentDetails_label04__fVD2H",modelStudentDetailsReportTopicsBtn:"ModalForStudentDetails_modelStudentDetailsReportTopicsBtn__CIi7w",modelStudentDetailsReportPieChartSection:"ModalForStudentDetails_modelStudentDetailsReportPieChartSection__eSbB+",modelStudentDetailsReportTopicSec:"ModalForStudentDetails_modelStudentDetailsReportTopicSec__lmUJ4",title:"ModalForStudentDetails_title__fpoi-",reportListingMainContainer:"ModalForStudentDetails_reportListingMainContainer__M7Xb7",reportListingHeaderSection:"ModalForStudentDetails_reportListingHeaderSection__vNiZS",reportListingBackButton:"ModalForStudentDetails_reportListingBackButton__Kisjl",reportListingFilterSection:"ModalForStudentDetails_reportListingFilterSection__45jpN",reportListingFilterSectionHead:"ModalForStudentDetails_reportListingFilterSectionHead__uE-uK",reportListingFilterSectionContent:"ModalForStudentDetails_reportListingFilterSectionContent__-IpA+",reportListingContent:"ModalForStudentDetails_reportListingContent__n3gVE",reportListingContentItem:"ModalForStudentDetails_reportListingContentItem__+oYYI",reportListingContentItemSec1:"ModalForStudentDetails_reportListingContentItemSec1__VgyYj",reportListingContentItemSec2:"ModalForStudentDetails_reportListingContentItemSec2__BMays",reportListingContentItemSecCont:"ModalForStudentDetails_reportListingContentItemSecCont__hAHL+",highScore:"ModalForStudentDetails_highScore__HNyoh",mediumScore:"ModalForStudentDetails_mediumScore__cg4-5",Failed:"ModalForStudentDetails_Failed__x0G8e",noScore:"ModalForStudentDetails_noScore__3OOFP",reportDetailsContainer:"ModalForStudentDetails_reportDetailsContainer__7j5ID",reportDetailsTitle1:"ModalForStudentDetails_reportDetailsTitle1__s+ZOV",reportDetailsTitle2:"ModalForStudentDetails_reportDetailsTitle2__byoX+",reportDetailsTitle3:"ModalForStudentDetails_reportDetailsTitle3__yfaUw",reportDetailsTitle4:"ModalForStudentDetails_reportDetailsTitle4__td6gt",reportDetailsTitle5:"ModalForStudentDetails_reportDetailsTitle5__2p6UA",reportDetailsGraphContainer:"ModalForStudentDetails_reportDetailsGraphContainer__YreAi",reportDetailsGraphHead:"ModalForStudentDetails_reportDetailsGraphHead__mkEtd",dot:"ModalForStudentDetails_dot__altz0",studentDetailsContactSectionMainContainer:"ModalForStudentDetails_studentDetailsContactSectionMainContainer__2mVa3",studentDetailsContactSectionContent:"ModalForStudentDetails_studentDetailsContactSectionContent__9Q3Sa",studentDetailsContactSectionItem:"ModalForStudentDetails_studentDetailsContactSectionItem__cvT1J",loader:"ModalForStudentDetails_loader__D+Jls","spinner-d3wgkg":"ModalForStudentDetails_spinner-d3wgkg__wsJN1"},s=n(1413),a=n(74165),d=n(93433),r=n(15861),u=n(25327),c=n(85554),v=n(77867),m=n(4120),_=function(e){var t=0;return(e=Math.floor(e))>=0&&e<30?t=3:e>=30&&e<70?t=2:e>=70&&e<=100&&(t=1),t},p=n(97738),S=n(268),h=n(46417),D=function(e){var t,n,D,x,f,j,b=e.onClickBack,g=e.onClickTopic,y=e.setLevels,N=e.masteryLevel,M=e.setMasteryLevel,C=e.selectedLevel,T=e.setSelectedLevel,F=e.loading,k=void 0===F||F,L=e.setLoading,R=e.handleReportListing,I=(0,c.I0)(),H=(0,c.v9)((function(e){return e.session})).studentDetails,E=(0,l.useState)([]),Z=(0,i.Z)(E,2),w=Z[0],A=Z[1],P=(0,l.useCallback)((0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={subject_id:0},I((0,p.Mg)(t)).then((function(e){var t,n,i,l,o,s,a=(null===e||void 0===e||null===(t=e.payload)||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.activityLevels)||void 0===i?void 0:i.filter((function(e){return 2===(null===e||void 0===e?void 0:e.subject_id)})))||[],r=(null===e||void 0===e||null===(l=e.payload)||void 0===l||null===(o=l.data)||void 0===o||null===(s=o.activityLevels)||void 0===s?void 0:s.filter((function(e){return 1===(null===e||void 0===e?void 0:e.subject_id)})))||[],u=[].concat((0,d.Z)(r),(0,d.Z)(a)).reduce((function(e,t){var n=1===t.subject_id?"English":"Maths";return e[n]||(e[n]=[]),e[n].push({label:t.level_name,value:t.activity_level_id}),e}),{}),c=Object.keys(u).map((function(e){return{label:e,options:u[e]}}));A(c)}));case 2:case"end":return e.stop()}}),e)}))),[I]);(0,l.useEffect)((function(){null!==H&&void 0!==H&&H.topicDetailsBySubject&&L(!1);var e,t,n=[];null!==H&&void 0!==H&&H.topicDetailsBySubject&&(null===H||void 0===H||null===(e=H.topicDetailsBySubject)||void 0===e||null===(t=e.primaryList)||void 0===t||t.map((function(e,t){var i={label:null===e||void 0===e?void 0:e.level_name,value:null===e||void 0===e?void 0:e.activity_level_id};return n.push(i),{}})),y(n))}),[null===H||void 0===H?void 0:H.topicDetailsBySubject,y,L]);return(0,l.useEffect)((function(){P()}),[I]),(0,h.jsxs)("div",{className:o.reportListingMainContainer,children:[(0,h.jsxs)("div",{className:o.reportListingHeaderSection,children:[(0,h.jsxs)("div",{className:o.reportListingBackButton,children:[(0,h.jsx)("img",{onClick:function(){return b()},alt:"",src:u.vJ}),(0,h.jsx)("label",{children:"Back"})]}),(0,h.jsx)("img",{onClick:function(){return b()},src:u.Iz,alt:""})]}),(0,h.jsxs)("div",{className:o.reportListingFilterSection,children:[(0,h.jsx)("div",{className:o.reportListingFilterSectionHead,children:(0,h.jsx)("label",{children:"View all topics"})}),(0,h.jsxs)("div",{className:o.reportListingFilterSectionContent,children:[(0,h.jsx)("img",{onClick:function(){R()},src:u.k1,alt:""}),(0,h.jsx)(v.Z,{placeHolder:"Select level",styles:{container:function(e){return(0,s.Z)((0,s.Z)({},m.Z.container(e)),{},{minWidth:"150px !important",maxWidth:"150px !important",marginRight:"20px !important"})}},list:w,isGroup:!0,value:C,handleChange:function(e,t){T(e.value)}}),(0,h.jsx)(v.Z,{styles:{container:function(e){return(0,s.Z)((0,s.Z)({},m.Z.container(e)),{},{minWidth:"150px !important",maxWidth:"150px !important"})}},list:[{value:0,label:"No score"},{value:1,label:"Low mastery"},{value:2,label:"Mid mastery"},{value:3,label:"High mastery"}],value:N,handleChange:function(e,t){M(e.value)}})]}),k?(0,h.jsx)("div",{className:o.loader}):(null===H||void 0===H||null===(t=H.topicDetailsBySubject)||void 0===t||null===(n=t.subjectDetails)||void 0===n||null===(D=n.LessonActivities)||void 0===D?void 0:D.length)>0?(0,h.jsx)("div",{className:o.reportListingContent,children:null===H||void 0===H||null===(x=H.topicDetailsBySubject)||void 0===x||null===(f=x.subjectDetails)||void 0===f||null===(j=f.LessonActivities)||void 0===j?void 0:j.map((function(e,t){var n=null!==e&&void 0!==e&&e.current_mastery_score?_(null===e||void 0===e?void 0:e.current_mastery_score):0;return(0,h.jsxs)("div",{className:o.reportListingContentItem,children:[(0,h.jsxs)("div",{onClick:function(){return g(null===e||void 0===e?void 0:e.activity_topic_id)},className:o.reportListingContentItemSec1,children:[(0,h.jsxs)("div",{className:o.reportListingContentItemSecCont,children:[(0,h.jsx)("label",{children:null===e||void 0===e?void 0:e.topic_name}),(0,h.jsx)("span",{children:null===e||void 0===e?void 0:e.level_name})]}),(0,h.jsx)("img",{alt:"",src:u.xD})]}),(0,h.jsxs)("div",{className:o.reportListingContentItemSec2,children:[(0,h.jsx)("p",{children:"Questions Completed"}),(0,h.jsx)("span",{children:null===e||void 0===e?void 0:e.question_completed})]}),(0,h.jsxs)("div",{className:o.reportListingContentItemSec2,children:[(0,h.jsx)("p",{children:"Current mastery score"}),(0,h.jsx)("p",{id:0===n?o.noScore:[1===n?o.highScore:[2===n?o.mediumScore:3===n&&o.Failed]],children:null!==e&&void 0!==e&&e.current_mastery_score?Math.floor(null===e||void 0===e?void 0:e.current_mastery_score):(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)("label",{children:"No Score"}),(0,h.jsx)("img",{src:u.uM,alt:""})]})})]})]},t)}))}):(0,h.jsx)("p",{style:{alignSelf:"center"},children:S.yt})]})]})},x=n(35538),f=n(75743),j=n(70816),b=n.n(j);x.kL.register(x.uw,x.f$,x.od,x.jn,x.Dx,x.u,x.De);var g={responsive:!0,plugins:{legend:{display:!1,position:"top"},title:{display:!1}}},y=function(e,t){var n=t?function(e){var t=[],n=[];return null===e||void 0===e||e.map((function(e,i){var l;(null===e||void 0===e?void 0:e.date)&&t.push(null===(l=b()(null===e||void 0===e?void 0:e.date))||void 0===l?void 0:l.format("DD MMM")),(null===e||void 0===e?void 0:e.masteryScore)&&(null===n||void 0===n||n.push(null===e||void 0===e?void 0:e.masteryScore))})),{labels:t,data:n}}(e):function(e){for(var t=[],n=[],i=b()().format("M"),l=i-6;l<=i;l++)l>0?t.push(b()(l,"M").format("MMM")):t.push(b()(l+12,"M").format("MMM"));return null===t||void 0===t||t.map((function(t,i){var l,o=0,s=null===e||void 0===e||null===(l=e.filter((function(e){var n;return(null===(n=b()(null===e||void 0===e?void 0:e.date))||void 0===n?void 0:n.format("MMM"))===t})))||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.masteryScore}));return null===s||void 0===s||s.map((function(e,t){return e&&e>o&&(o=e),{}})),null===n||void 0===n||n.push(o),{}})),{labels:t,data:n}}(e),i=n.data;return{labels:n.labels,datasets:[{label:"Mastery score",data:i,fill:!0,borderColor:"rgb(0, 0, 0,0.5)",borderWidth:1,tension:.5,pointRadius:3,pointStyle:"circle"}]}};function N(e){var t=e.graphData,n=e.initialDate;return(0,h.jsx)(f.x1,{options:g,data:y(t,n)})}var M=n(93721),C=n(26672),T=n(61378),F=n.n(T),k=(n(72632),function(e){var t,n,s,a,r,v,m,_,p,S,D=e.onClickBack,x=e.loading,f=e.setLoading,j=e.subject_id,g=e.onFilter,y=(0,l.useState)(null),T=(0,i.Z)(y,2),k=T[0],L=T[1],R=(0,c.v9)((function(e){return e.session})).studentDetails,I=(0,d.Z)(new Set((null===j||void 0===j?void 0:j.map((function(e){return 1===+e?M.pY.ENGLISH:2===+e?M.pY.MATHS:""})))||[])).toString();(0,l.useEffect)((function(){null!==R&&void 0!==R&&R.graphDetails&&f(!1)}),[R,f]);var H=(0,l.forwardRef)((function(e,t){e.value;var n=e.onClick;return(0,h.jsxs)("div",{style:{cursor:"pointer"},className:"example-custom-input",onClick:n,ref:t,children:[(0,h.jsxs)("label",{style:{cursor:"pointer"},className:o.reportDetailsTitle1,children:[k?b()(k).format("MMM yyyy"):"Past 6 months"," ","  "]}),(0,h.jsx)(C.RiI,{style:{marginLeft:"10px",marginRight:"10px"},color:"#4d4d4d",fontSize:12})]})}));return(0,h.jsxs)("div",{className:o.reportListingMainContainer,children:[(0,h.jsxs)("div",{className:o.reportListingHeaderSection,children:[(0,h.jsxs)("div",{className:o.reportListingBackButton,children:[(0,h.jsx)("img",{onClick:function(){return D()},alt:"",src:u.vJ}),(0,h.jsx)("label",{children:"Back"})]}),(0,h.jsx)("img",{onClick:function(){return D()},src:u.Iz,alt:""})]}),x?(0,h.jsx)("div",{className:o.loader}):(0,h.jsxs)("div",{className:o.reportDetailsContainer,children:[(0,h.jsxs)("label",{className:o.reportDetailsTitle1,children:[I,I?"\u2022":"",null===R||void 0===R||null===(t=R.graphDetails)||void 0===t?void 0:t.level_name]}),(0,h.jsx)("label",{className:o.reportDetailsTitle2,children:null===R||void 0===R||null===(n=R.graphDetails)||void 0===n?void 0:n.topic_name}),(0,h.jsx)("label",{className:o.reportDetailsTitle3,children:"Questions Completed"}),(0,h.jsx)("label",{className:o.reportDetailsTitle4,children:null!==R&&void 0!==R&&null!==(s=R.graphDetails)&&void 0!==s&&s.totalQuestionAttempt?null===R||void 0===R||null===(a=R.graphDetails)||void 0===a?void 0:a.totalQuestionAttempt:0}),(0,h.jsxs)("div",{className:o.reportDetailsGraphContainer,children:[(0,h.jsxs)("div",{className:o.reportDetailsGraphHead,children:[(0,h.jsx)("label",{className:o.reportDetailsTitle5,children:"Mastery score over time"}),(0,h.jsx)("img",{src:u.Zc,alt:""})]}),(0,h.jsx)("label",{className:o.reportDetailsTitle2,children:null!==R&&void 0!==R&&null!==(r=R.graphDetails)&&void 0!==r&&r.masteryOverTime?Math.floor(null===R||void 0===R||null===(v=R.graphDetails)||void 0===v?void 0:v.masteryOverTime):null}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,h.jsx)("label",{className:o.reportDetailsTitle1,children:function(){var e,t,n="";if((null===R||void 0===R||null===(e=R.graphDetails)||void 0===e||null===(t=e.graphData)||void 0===t?void 0:t.length)>0){var i=b()().format("M");if(1!==i){var l,s,a,d,r,c,v=i-1,m=0,_=0,p=null===R||void 0===R||null===(l=R.graphDetails)||void 0===l||null===(s=l.graphData)||void 0===s||null===(a=s.filter((function(e){var t;return(null===(t=b()(null===e||void 0===e?void 0:e.date))||void 0===t?void 0:t.format("M"))===i})))||void 0===a?void 0:a.map((function(e){return null===e||void 0===e?void 0:e.masteryScore}));null===p||void 0===p||p.map((function(e,t){return e&&e>m&&(m=e),{}}));var S=null===R||void 0===R||null===(d=R.graphDetails)||void 0===d||null===(r=d.graphData)||void 0===r||null===(c=r.filter((function(e){var t;return(null===(t=b()(null===e||void 0===e?void 0:e.date))||void 0===t?void 0:t.format("M"))===v})))||void 0===c?void 0:c.map((function(e){return null===e||void 0===e?void 0:e.masteryScore}));null===S||void 0===S||S.map((function(e,t){return e&&e>_&&(_=e),{}}));var D=m-_;n=D>0?(0,h.jsxs)("label",{children:[(0,h.jsxs)("span",{id:null===o||void 0===o?void 0:o.label0,children:[(0,h.jsx)("img",{alt:"",src:u.zJ}),Math.floor(D)," "]})," ","in the past month"]}):(0,h.jsxs)("label",{children:[(0,h.jsxs)("span",{id:null===o||void 0===o?void 0:o.label2,children:[(0,h.jsx)("img",{alt:"",src:u.DI}),Math.floor(D)," "]})," ","in the past month"]})}}return n}()}),(0,h.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,h.jsx)(F(),{selected:k,onChange:function(e){L(e),g(e?b()(e).format("MM-YYYY"):"")},showMonthYearPicker:!0,customInput:(0,h.jsx)(H,{}),isClearable:!0})})]}),(null===R||void 0===R||null===(m=R.graphDetails)||void 0===m||null===(_=m.graphData)||void 0===_?void 0:_.length)>0&&null!==(p=window)&&void 0!==p&&p.ResizeObserver?(0,h.jsx)(N,{initialDate:k,graphData:null===R||void 0===R||null===(S=R.graphDetails)||void 0===S?void 0:S.graphData}):(0,h.jsx)("div",{children:"No graph data "})]}),(0,h.jsx)("br",{})]})]})}),L=n(1320),R=function(e){var t,n,i,s,a,d,r,u,v,m,_,p,S,D,x,f,j,g,y,N,M,C,T,F,k,L=e.loading,R=e.setLoading,I=(0,c.v9)((function(e){return e.session})).studentDetails;(0,l.useEffect)((function(){R(!0),null!==I&&void 0!==I&&I.student&&R(!1)}),[R,null===I||void 0===I?void 0:I.student]);var H=function(e){var t=e.caption,n=e.list;return(0,h.jsxs)("div",{className:o.studentDetailsContactSectionContent,children:[(0,h.jsx)("label",{children:t}),null===n||void 0===n?void 0:n.map((function(e,t){return(0,h.jsxs)("div",{className:o.studentDetailsContactSectionItem,children:[(0,h.jsx)("label",{children:null===e||void 0===e?void 0:e.label}),(0,h.jsx)("span",{children:null===e||void 0===e?void 0:e.name})]},t)}))]})},E=[{label:"Gender Identity",name:null===I||void 0===I||null===(t=I.student)||void 0===t?void 0:t.st_gender},{label:"Date of birth",name:null!==I&&void 0!==I&&null!==(n=I.student)&&void 0!==n&&n.st_dob?b()(null===I||void 0===I||null===(i=I.student)||void 0===i?void 0:i.st_dob).format("DD MMM yyyy"):null},{label:"School",name:null===I||void 0===I||null===(s=I.student)||void 0===s||null===(a=s.tbl_school)||void 0===a?void 0:a.sc_name},{label:"Email",name:null===I||void 0===I||null===(d=I.student)||void 0===d?void 0:d.st_email},{label:"Mobile",name:null===I||void 0===I||null===(r=I.student)||void 0===r?void 0:r.st_phone},{label:"Country",name:null===I||void 0===I||null===(u=I.student)||void 0===u?void 0:u.st_country}],Z=[{label:"Given name",name:null===I||void 0===I||null===(v=I.student)||void 0===v||null===(m=v.tbl_parstu_relation)||void 0===m||null===(_=m.tbl_parent)||void 0===_?void 0:_.par_firstname},{label:"Family name",name:null===I||void 0===I||null===(p=I.student)||void 0===p||null===(S=p.tbl_parstu_relation)||void 0===S||null===(D=S.tbl_parent)||void 0===D?void 0:D.par_surname},{label:"Relationship",name:null===I||void 0===I||null===(x=I.student)||void 0===x||null===(f=x.tbl_parstu_relation)||void 0===f?void 0:f.ps_relationship},{label:"Mobile",name:null===I||void 0===I||null===(j=I.student)||void 0===j||null===(g=j.tbl_parstu_relation)||void 0===g||null===(y=g.tbl_parent)||void 0===y?void 0:y.par_phone},{label:"Work",name:null===I||void 0===I||null===(N=I.student)||void 0===N||null===(M=N.tbl_parstu_relation)||void 0===M||null===(C=M.tbl_parent)||void 0===C?void 0:C.par_phone},{label:"Email",name:null===I||void 0===I||null===(T=I.student)||void 0===T||null===(F=T.tbl_parstu_relation)||void 0===F||null===(k=F.tbl_parent)||void 0===k?void 0:k.par_emailid}];return L?(0,h.jsx)("div",{className:o.loader}):(0,h.jsxs)("div",{className:o.studentDetailsContactSectionMainContainer,children:[(0,h.jsx)(H,{list:E,caption:"Student Details"}),(0,h.jsx)(H,{list:Z,caption:"Contact Details"})]})},I=n(33272),H=n(31387),E=n(88321),Z=function(e){var t,n,a,d,r,v,m,_,S,D,x,f,j=e.student_key,g=e.handleNotesListing,y=e.session,N=(0,c.v9)((function(e){return e.session})),M=N.studentDetails,C=N.lessonPlan,T=(0,l.useState)(!1),F=(0,i.Z)(T,2),k=F[0],L=F[1],R=(0,l.useState)(),Z=(0,i.Z)(R,2),w=Z[0],A=Z[1],P={session:null===C||void 0===C?void 0:C.pk_ses_key,student_key:j,note:""},Y=(0,l.useState)(P),B=(0,i.Z)(Y,2),O=B[0],G=B[1],z=(0,l.useRef)(null);f=z,(0,l.useEffect)((function(){function e(e){f.current&&!f.current.contains(e.target)&&q()}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[f,null===O||void 0===O?void 0:O.note]);var V=(0,c.I0)(),q=function(){var e;if(null!==O&&void 0!==O&&null!==(e=O.note)&&void 0!==e&&e.trim()&&null!==O&&void 0!==O&&O.session&&null!==O&&void 0!==O&&O.student_key){var t={pk_student_key:null===O||void 0===O?void 0:O.student_key,pk_ses_key:null===O||void 0===O?void 0:O.session,notes_details:null===O||void 0===O?void 0:O.note,pk_notes_key:null===O||void 0===O?void 0:O.notes_key};V((0,p.yS)(t)).then((function(e){var t;200===(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.statusCode)&&(G(P),g())}))}};return(0,h.jsxs)("div",{className:o.modelStudentSubSectionNotesContainer,children:[y?null:(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)("label",{children:"Lesson Notes"}),(0,h.jsx)("p",{children:"Add lesson notes for this session"}),(0,h.jsx)("textarea",{ref:z,placeholder:"Notes",rows:5,onChange:function(e){return G((function(t){return(0,s.Z)((0,s.Z)({},t),{},{note:e.target.value})}))},value:null===O||void 0===O?void 0:O.note})," "]}),!y&&null!==M&&void 0!==M&&null!==(t=M.notes)&&void 0!==t&&t.LessonNotes?(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesSection,children:null===M||void 0===M||null===(n=M.notes)||void 0===n||null===(a=n.LessonNotes)||void 0===a?void 0:a.map((function(e,t){var n,i,l,a;return(0,h.jsxs)("div",{onClick:function(){return G((function(t){var n,i;return(0,s.Z)((0,s.Z)({},t),{},{session:null===e||void 0===e||null===(n=e.tbl_session)||void 0===n||null===(i=n.tbl_session_time)||void 0===i?void 0:i.pk_sest_key,notes_key:null===e||void 0===e?void 0:e.pk_notes_key,note:null===e||void 0===e?void 0:e.notes_details})}))},style:{position:"relative"},className:o.modelStudentSubSectionNotesItem,children:[(0,h.jsxs)("div",{className:o.modelStudentSubSectionNotesItem1,children:[(0,h.jsx)("label",{children:null!==e&&void 0!==e&&e.modified_on?b()(null===e||void 0===e?void 0:e.modified_on).format("DD MMM YYYY (ddd)"):null}),(0,h.jsxs)("p",{children:[null!==e&&void 0!==e&&null!==(n=e.tbl_session)&&void 0!==n&&n.ses_start_time?(0,I.hK)(null===e||void 0===e||null===(i=e.tbl_session)||void 0===i?void 0:i.ses_start_time):null," ","-"," ",null!==e&&void 0!==e&&null!==(l=e.tbl_session)&&void 0!==l&&l.ses_end_time?(0,I.hK)(null===e||void 0===e||null===(a=e.tbl_session)||void 0===a?void 0:a.ses_end_time):null]}),(0,h.jsx)("p",{children:e.tbl_session.tbl_session_time.sest_name}),(0,h.jsx)("span",{children:null===e||void 0===e?void 0:e.name})]}),(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesItem2,children:(0,h.jsx)("p",{children:null===e||void 0===e?void 0:e.notes_details})}),(0,h.jsx)("div",{onClick:function(){return t=null===e||void 0===e?void 0:e.pk_notes_key,L(!0),void A(t);var t},style:{position:"absolute",right:0,top:0,cursor:"pointer"},children:(0,h.jsx)("img",{alt:"",src:u.UF})})]},t)}))}):(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesItem,children:(0,h.jsx)("span",{style:{fontSize:"10px"},children:"No Lesson Notes"})}),(0,h.jsx)("label",{children:"Other Notes"}),(null===M||void 0===M||null===(d=M.notes)||void 0===d||null===(r=d.otherNotes)||void 0===r?void 0:r.length)>0?(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesSection,children:null===M||void 0===M||null===(v=M.notes)||void 0===v||null===(m=v.otherNotes)||void 0===m?void 0:m.map((function(e,t){var n,i,l,s,a,d,r,u;return(0,h.jsxs)("div",{className:o.modelStudentSubSectionNotesItem,children:[(0,h.jsxs)("div",{className:o.modelStudentSubSectionNotesItem1,children:[(0,h.jsxs)("label",{children:[null!==e&&void 0!==e&&null!==(n=e.tbl_session)&&void 0!==n&&n.ses_date?b()(null===e||void 0===e||null===(i=e.tbl_session)||void 0===i?void 0:i.ses_date).format("DD MMM YYYY"):null,"(",null!==e&&void 0!==e&&null!==(l=e.tbl_session)&&void 0!==l&&null!==(s=l.tbl_session_time)&&void 0!==s&&s.sest_day?(0,I.hJ)(null===e||void 0===e||null===(a=e.tbl_session)||void 0===a||null===(d=a.tbl_session_time)||void 0===d?void 0:d.sest_day):null,")"]}),(0,h.jsx)("p",{children:null===e||void 0===e||null===(r=e.tbl_session)||void 0===r||null===(u=r.tbl_session_time)||void 0===u?void 0:u.sest_name})]}),(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesItem2,children:(0,h.jsx)("p",{children:null===e||void 0===e?void 0:e.notes_details})})]},t)}))}):(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesSection,children:(0,h.jsx)("span",{style:{fontSize:"10px",padding:"10px"},children:"No Data"})}),(0,h.jsx)("label",{children:"Goals"}),(null===M||void 0===M||null===(_=M.notes)||void 0===_||null===(S=_.goalNotes)||void 0===S?void 0:S.length)>0?(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesSection,children:null===M||void 0===M||null===(D=M.notes)||void 0===D||null===(x=D.goalNotes)||void 0===x?void 0:x.map((function(e,t){return(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesItem,children:(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesItem1,children:(0,h.jsx)("p",{children:null===e||void 0===e?void 0:e.notes_details})})},t)}))}):(0,h.jsx)("div",{className:o.modelStudentSubSectionNotesSection,children:(0,h.jsx)("span",{style:{fontSize:"10px",padding:"10px"},children:"No Data"})}),(0,h.jsx)(E.Z,{show:k,onHide:function(){return L(!1)},deleteConfirmation:function(){!function(){if(w){var e={pk_notes_key:w};V((0,p.FL)(e)).then((function(e){var t;200===(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.statusCode)&&(L(!1),H.Am.success("Deleted"),g())}))}else L(!1)}(),L(!1)},msg:"Do you want to delete this note?"})]})},w=n(3551),A="Pichart_container__3orUS",P="Pichart_chart__F3k-a",Y="Pichart_legendsContainer__TTMUH",B="Pichart_legendRow__j3cDP",O="Pichart_chartLabel__2zyzh",G="Pichart_legendIndicates__fDfXj";w.ZP.register(x.uw),w.ZP.register(x.De);var z=function(e){var t=[];return null===e||void 0===e||e.map((function(e,n){var i,l,o,s,a,d,r,u={id:0,topic:"",percent:0,color:""};if(n<4)u={id:n+1,topic:"".concat(null===e||void 0===e||null===(i=e.activity_node)||void 0===i||null===(l=i.activityLevelHasTopicNode)||void 0===l||null===(o=l.activity_level)||void 0===o?void 0:o.level_name," > ").concat(null===e||void 0===e||null===(s=e.activity_node)||void 0===s||null===(a=s.activityLevelHasTopicNode)||void 0===a||null===(d=a.activity_master_topic)||void 0===d?void 0:d.topic_name),percent:null===e||void 0===e?void 0:e.current_mastery_score,color:null===(r=L.Vw[n])||void 0===r?void 0:r.color},null===t||void 0===t||t.push(u);else if(4===n){var c;u={id:n+1,topic:"Others",percent:null===e||void 0===e?void 0:e.current_mastery_score,color:null===(c=L.Vw[n])||void 0===c?void 0:c.color},null===t||void 0===t||t.push(u)}return{}})),t};function V(e){var t,n,o,s,a,d,r=e.graphData,u=(0,l.useState)({labels:null===(t=z(r))||void 0===t?void 0:t.map((function(e,t){return null===e||void 0===e?void 0:e.topic})),datasets:[{LegendsData:null===(n=z(r))||void 0===n?void 0:n.map((function(e){return e})),data:null===(o=z(r))||void 0===o?void 0:o.map((function(e){return e.percent})),backgroundColor:null===(s=z(r))||void 0===s?void 0:s.map((function(e){return e.color})),borderWidth:0}]}),c=(0,i.Z)(u,1)[0],v=function(e){var t=e.item;return(0,h.jsxs)("div",{className:B,children:[(0,h.jsx)("div",{style:{backgroundColor:null===t||void 0===t?void 0:t.color},className:G}),(0,h.jsx)("label",{className:O,children:null===t||void 0===t?void 0:t.topic})]})};return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:A,children:[(0,h.jsx)("div",{className:"chart-container",children:(0,h.jsx)(f.by,{data:c,className:P,options:{plugins:{legend:{display:!1,position:"right",labels:{usePointStyle:!1,boxWidth:1,pointStyleWidth:4,boxHeight:4}}}}})}),(0,h.jsx)("div",{className:Y,children:null===c||void 0===c||null===(a=c.datasets[0])||void 0===a||null===(d=a.LegendsData)||void 0===d?void 0:d.map((function(e,t){return(0,h.jsx)(v,{item:e},t)}))})]})})}var q=n(773),U="#03a900",J="#f6911e",K="#4d4d4d",Q="#fb0000",W="#000000",X=function(e){var t=e.title1,n=e.title2,i=e.data,l=e.color,o=e.data1;return(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[t&&(0,h.jsx)("label",{style:{color:l,fontWeight:"bold",fontSize:"12px"},children:t}),n&&(0,h.jsx)("span",{style:{color:l,fontSize:"12px"},children:n}),i&&(0,h.jsx)("p",{style:{fontSize:"12px"},children:i}),o&&(0,h.jsx)("p",{style:{fontSize:"12px"},children:o})]})},$=function(){return(0,h.jsxs)("div",{children:[(0,h.jsx)(X,{data:"A mastery score is an integer from 0 - 100 that indicates a student's competence in a particular topic at a particular year level. A mastery score is always given with a <Year Level> and a <Topic>. This year level and topic is obtained from the Mastery Tree in LCMS."}),(0,h.jsx)(X,{title1:"High mastery",title2:"Mastery score of more than 70",color:U,data:"Your child is proficient at this topic and can move on to new topics."}),(0,h.jsx)(X,{title1:"Mid mastery",title2:"Mastery score of 30 - 69",color:J,data:"Your child is getting the hang of these topics and should practice more to get better at it!"}),(0,h.jsx)(X,{title1:"Low mastery",title2:"Mastery score of less than 30",color:Q,data:"Your child might be new to the topic and would need time to grasp the fundamental concepts.!"}),(0,h.jsx)(X,{title1:"No score",color:K,data:"Your child will need to complete more questions in that topic to generate a mastery score."}),(0,h.jsx)(X,{title1:"How is the mastery score calculated?",color:W,data:"Formula: (No of Q correct on 1st try) / (Total no of Q in Year Level + Topic) * 100% ",data1:"Rounding: To nearest whole integer"})]})},ee=function(e){e.setReportDetails;var t,n,s,a,r,v,m,p,S,D,x,f,j,b,g,y,N,C,T,F,k,L,R,I,H,E,Z,w,A,P,Y=e.setReportListing,B=e.onClickTopic,O=e.subject_id,G=(0,c.v9)((function(e){return e.session})).studentDetails,z=(0,l.useState)(!1),U=(0,i.Z)(z,2),J=U[0],K=U[1],Q=(0,d.Z)(new Set((null===O||void 0===O?void 0:O.map((function(e){return 1===+e?M.pY.ENGLISH+" Curriculum":2===+e?M.pY.MATHS+" Curriculum":""})))||[])).toString();return(0,l.useEffect)((function(){}),[]),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportSectionMainContainer,children:[(0,h.jsx)("div",{className:o.modelStudentDetailsReportSectionHeader1,children:(0,h.jsxs)("label",{children:[null===G||void 0===G||null===(t=G.student)||void 0===t||null===(n=t.activity_level)||void 0===n?void 0:n.level_name," ",null!==G&&void 0!==G&&null!==(s=G.student)&&void 0!==s&&null!==(a=s.activity_level)&&void 0!==a&&a.level_name?"\u2022":""," ",Q]})}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportSectionHeader2,children:[(0,h.jsxs)("div",{className:o.modelStudentDetailsReportSectionHeader2Item,children:[(0,h.jsx)("label",{children:"Classes Attended"}),(0,h.jsx)("span",{children:null===G||void 0===G||null===(r=G.reportDetails)||void 0===r?void 0:r.classAttendedCount})]}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportSectionHeader2Item,children:[(0,h.jsx)("label",{children:"Activities Completed"}),(0,h.jsx)("span",{children:null===G||void 0===G||null===(v=G.reportDetails)||void 0===v?void 0:v.activityCompletedCount})]})]}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportSectionHeader3,children:[(0,h.jsx)("label",{children:"Topic mastery"}),(0,h.jsx)("img",{onClick:function(){return K(!0)},src:u.W7,alt:""})]}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportSectionTopicsSection,children:[(0,h.jsx)("label",{children:"No of Topics"}),(0,h.jsx)("span",{children:function(){var e,t,n,i,l,o,s,a;return null!==G&&void 0!==G&&G.reportDetails?(null===G||void 0===G||null===(e=G.reportDetails)||void 0===e||null===(t=e.mastery_graph_data)||void 0===t?void 0:t.high_mastery_score)+(null===G||void 0===G||null===(n=G.reportDetails)||void 0===n||null===(i=n.mastery_graph_data)||void 0===i?void 0:i.mid_mastery_score)+(null===G||void 0===G||null===(l=G.reportDetails)||void 0===l||null===(o=l.mastery_graph_data)||void 0===o?void 0:o.low_mastery_score)+(null===G||void 0===G||null===(s=G.reportDetails)||void 0===s||null===(a=s.mastery_graph_data)||void 0===a?void 0:a.no_score):0}()})]}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportSectionTopicsSection1,children:[(0,h.jsxs)("div",{className:o.modelStudentDetailsReportTopicsDiagramDesc,children:[(0,h.jsx)("div",{className:o.modelStudentDetailsReportSectionTopicsDiagram1}),(0,h.jsx)("label",{id:o.label01,children:"High mastery"}),(0,h.jsxs)("span",{children:[(0,h.jsx)("strong",{children:null!==G&&void 0!==G&&null!==(m=G.reportDetails)&&void 0!==m&&null!==(p=m.mastery_graph_data)&&void 0!==p&&p.high_mastery_score?null===G||void 0===G||null===(S=G.reportDetails)||void 0===S||null===(D=S.mastery_graph_data)||void 0===D?void 0:D.high_mastery_score:0}),"topic"]})]}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportTopicsDiagramDesc,children:[(0,h.jsx)("div",{className:o.modelStudentDetailsReportSectionTopicsDiagram2}),(0,h.jsx)("label",{id:o.label02,children:"Medium mastery"}),(0,h.jsxs)("span",{children:[(0,h.jsx)("strong",{children:null!==G&&void 0!==G&&null!==(x=G.reportDetails)&&void 0!==x&&null!==(f=x.mastery_graph_data)&&void 0!==f&&f.mid_mastery_score?null===G||void 0===G||null===(j=G.reportDetails)||void 0===j||null===(b=j.mastery_graph_data)||void 0===b?void 0:b.mid_mastery_score:0}),"topic"]})]}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportTopicsDiagramDesc,children:[(0,h.jsx)("div",{className:o.modelStudentDetailsReportSectionTopicsDiagram3}),(0,h.jsx)("label",{id:o.label03,children:"Low mastery"}),(0,h.jsxs)("span",{children:[(0,h.jsx)("strong",{children:null!==G&&void 0!==G&&null!==(g=G.reportDetails)&&void 0!==g&&null!==(y=g.mastery_graph_data)&&void 0!==y&&y.low_mastery_score?null===G||void 0===G||null===(N=G.reportDetails)||void 0===N||null===(C=N.mastery_graph_data)||void 0===C?void 0:C.low_mastery_score:0}),"topic"]})]}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportTopicsDiagramDesc,children:[(0,h.jsx)("div",{className:o.modelStudentDetailsReportSectionTopicsDiagram4}),(0,h.jsx)("label",{id:o.label04,children:"No Score"}),(0,h.jsxs)("span",{children:[(0,h.jsx)("strong",{children:null!==G&&void 0!==G&&null!==(T=G.reportDetails)&&void 0!==T&&null!==(F=T.mastery_graph_data)&&void 0!==F&&F.no_score?null===G||void 0===G||null===(k=G.reportDetails)||void 0===k||null===(L=k.mastery_graph_data)||void 0===L?void 0:L.no_score:0}),"topic"]})]})]}),(0,h.jsxs)("div",{onClick:function(){return Y()},className:o.modelStudentDetailsReportTopicsBtn,children:[(0,h.jsx)("label",{children:"All topics"}),(0,h.jsx)("img",{onClick:function(){return Y()},src:u.vj,alt:""})]}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportPieChartSection,children:[(null===G||void 0===G||null===(R=G.reportDetails)||void 0===R||null===(I=R.improveChildMasteryScore)||void 0===I?void 0:I.length)>0&&null!==(H=window)&&void 0!==H&&H.ResizeObserver?(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)("label",{children:"Topics practiced in the past month"}),(0,h.jsx)(V,{graphData:null===G||void 0===G||null===(E=G.reportDetails)||void 0===E?void 0:E.improveChildMasteryScore})]}):null,(null===G||void 0===G||null===(Z=G.reportDetails)||void 0===Z||null===(w=Z.improveChildMasteryScore)||void 0===w?void 0:w.length)>0?(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)("label",{children:"Improve their mastery score"}),(0,h.jsx)("span",{children:"Practice these topics more"}),(0,h.jsxs)("div",{className:o.modelStudentDetailsReportTopicSec,children:[(0,h.jsx)("p",{children:"TOPIC"}),(0,h.jsx)("p",{children:"MASTERY SCORE"})]}),null===G||void 0===G||null===(A=G.reportDetails)||void 0===A||null===(P=A.improveChildMasteryScore)||void 0===P?void 0:P.map((function(e,t){var n=null!==e&&void 0!==e&&e.current_mastery_score?_(null===e||void 0===e?void 0:e.current_mastery_score):0;return(0,h.jsxs)("div",{className:o.modelStudentDetailsReportTopicSec,onClick:function(){var t,n,i;return B(null===e||void 0===e||null===(t=e.activity_node)||void 0===t||null===(n=t.activityLevelHasTopicNode)||void 0===n||null===(i=n.activity_master_topic)||void 0===i?void 0:i.activity_topic_id)},children:[(0,h.jsx)("span",{className:o.title,children:null===e||void 0===e?void 0:e.activity_node.node_name}),(0,h.jsxs)("span",{id:0===n?o.noScore:[1===n?o.highScore:[2===n?o.mediumScore:3===n&&o.Failed]],children:[null!==e&&void 0!==e&&e.current_mastery_score?Math.floor(null===e||void 0===e?void 0:e.current_mastery_score):"No Score",(0,h.jsx)("img",{src:u.xD,alt:""})]})]},t)}))]}):null]}),(0,h.jsx)(q.Z,{show:J,hide:function(){return K(!1)},closeModal:function(){return K(!1)},modalBody:$(),title:"Topic mastery"})]})},te=n(60390),ne=n(5618),ie=function(e){var t,n,s,a,r,v,m,_,p,S,D,x,f,j,g,y,N,C,T,F,k,L,H,E,w,A,P,Y=e.setLoading,B=e.loading,O=e.tabSelected,G=e.setReportDetails,z=e.masteryLevel,V=e.selectedLevel,q=e.handleReportListing,U=e.handleTabListing,J=e.tabs,K=e.setModalForViewPastLessons,Q=e.closeModal,W=e.student_key,X=e.handleNotesListing,$=e.subject_id,ie=e.session,le=e.onClickTopic,oe=(0,c.v9)((function(e){return e.session})).studentDetails,se=null===oe||void 0===oe?void 0:oe.student,ae=(0,l.useState)(!1),de=(0,i.Z)(ae,2),re=de[0],ue=de[1];(0,d.Z)(new Set((null===$||void 0===$?void 0:$.map((function(e){return 1===+e?M.pY.ENGLISH:2===+e?M.pY.MATHS:""})))||[])).toString();return(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:o.modalStudentHeader,children:[(0,h.jsx)("div",{className:o.modalStudentHeaderIcon,children:(0,h.jsx)("img",{src:re?u.wO:null===se||void 0===se?void 0:se.st_avatar,onError:function(){ue(!0)},alt:""})}),(0,h.jsxs)("div",{className:o.modalStudentHeaderName,children:[(0,h.jsxs)("label",{id:o.name,children:[null===se||void 0===se?void 0:se.st_first_name," ",null===se||void 0===se?void 0:se.st_surname]}),(0,h.jsxs)("label",{id:o.level,children:[null===se||void 0===se||null===(t=se.activity_level)||void 0===t?void 0:t.level_name," ",null!==se&&void 0!==se&&null!==(n=se.activity_level)&&void 0!==n&&n.level_name?"\u2022":""," ",null===se||void 0===se||null===(s=se.tbl_school)||void 0===s?void 0:s.sc_name]}),(0,h.jsxs)("label",{id:o.level2,children:["Student ID ",null===se||void 0===se?void 0:se.pk_student_id," ",null!==se&&void 0!==se&&se.pk_student_id?"\u2022":"",null!==se&&void 0!==se&&null!==(a=se.next_session)&&void 0!==a&&null!==(r=a.tbl_session_time)&&void 0!==r&&null!==(v=r.tbl_student_enrolments[0])&&void 0!==v&&v.enrol_start_date?" Joined ".concat(b()(null===se||void 0===se||null===(m=se.next_session)||void 0===m||null===(_=m.tbl_session_time)||void 0===_||null===(p=_.tbl_student_enrolments[0])||void 0===p?void 0:p.enrol_start_date).format("DD MMM YYYY")):null]})]}),(0,h.jsx)("div",{className:o.modalStudentHeaderClose,children:(0,h.jsx)("img",{onClick:function(){return Q(!1)},src:u.A3,alt:""})})]}),null!==se&&void 0!==se&&se.next_session?(0,h.jsxs)("div",{className:o.modalStudentHeaderSectionContent,children:[(0,h.jsx)("label",{id:o.label1,children:"Next session"}),(0,h.jsxs)("div",{className:o.modalStudentHeaderSectionContentDetails1,children:[(0,h.jsxs)("div",{className:o.modalStudentHeaderSectionContentDetails1Item1,children:[(0,h.jsx)("label",{children:null!==se&&void 0!==se&&null!==(S=se.next_session)&&void 0!==S&&S.ses_date?b()(null===se||void 0===se||null===(D=se.next_session)||void 0===D?void 0:D.ses_date).format("DD"):null}),(0,h.jsx)("label",{children:null!==se&&void 0!==se&&null!==(x=se.next_session)&&void 0!==x&&x.ses_date?b()(null===se||void 0===se||null===(f=se.next_session)||void 0===f?void 0:f.ses_date).format("MMM"):null})]}),(0,h.jsxs)("div",{className:o.modalStudentHeaderSectionContentDetails1Item2,children:[(0,h.jsxs)("label",{children:[null!==se&&void 0!==se&&null!==(j=se.next_session)&&void 0!==j&&j.ses_start_time?(0,I.hK)(null===se||void 0===se||null===(g=se.next_session)||void 0===g?void 0:g.ses_start_time):null," ","-"," ",null!==se&&void 0!==se&&null!==(y=se.next_session)&&void 0!==y&&y.ses_end_time?(0,I.hK)(null===se||void 0===se||null===(N=se.next_session)||void 0===N?void 0:N.ses_end_time):null,"(",null!==se&&void 0!==se&&null!==(C=se.next_session)&&void 0!==C&&C.ses_start_time&&null!==se&&void 0!==se&&null!==(T=se.next_session)&&void 0!==T&&T.ses_end_time?(0,te.w)(null===se||void 0===se||null===(F=se.next_session)||void 0===F?void 0:F.ses_start_time,null===se||void 0===se||null===(k=se.next_session)||void 0===k?void 0:k.ses_end_time):null,")"]}),(0,h.jsx)("label",{children:(0,h.jsx)("b",{children:null===se||void 0===se||null===(L=se.next_session)||void 0===L||null===(H=L.tbl_session_time)||void 0===H?void 0:H.sest_name})}),(0,h.jsxs)("label",{children:[null===se||void 0===se||null===(E=se.next_session)||void 0===E?void 0:E.type,".",(0,ne.Z)(se.next_session.tbl_session_time.tbl_student_enrolments),".",null===se||void 0===se||null===(w=se.next_session)||void 0===w?void 0:w.total_students," students"]})]})]}),null!==se&&void 0!==se&&null!==(A=se.next_session)&&void 0!==A&&A.activity_counts?(0,h.jsxs)("label",{id:o.label1,children:[null===se||void 0===se||null===(P=se.next_session)||void 0===P?void 0:P.activity_counts," activities assigned"]}):(0,h.jsx)("label",{id:o.label2,children:"No activities assigned"})]}):null,(0,h.jsxs)("div",{className:o.modalStudentHeaderSectionContent1,children:[(0,h.jsx)("label",{children:"View past lessons"}),(0,h.jsx)("img",{onClick:function(){return K(!0)},src:u.vj,alt:""})]}),(0,h.jsx)("div",{className:o.modalStudentSubHeaderSection,children:null===J||void 0===J?void 0:J.map((function(e,t){return(0,h.jsx)("div",{onClick:function(){return U(null===e||void 0===e?void 0:e.id)},className:O===(null===e||void 0===e?void 0:e.id)?o.modelStudentSubHeaderItemSelected:o.modelStudentSubHeaderItem,children:null===e||void 0===e?void 0:e.name},t)}))}),(0,h.jsxs)("div",{className:o.modelStudentSubSection,children:[1===O&&(0,h.jsx)(Z,{session:ie,student_key:W,handleNotesListing:X}),2===O&&(0,h.jsx)(ee,{setReportListing:function(){return q(V,z)},setReportDetails:G,onClickTopic:le,subject_id:$}),3===O&&(0,h.jsx)(R,{loading:B,setLoading:Y})]})]})},le=function(e){var t=e.closeModal,n=e.setModalForViewPastLessons,s=e.student_key,a=e.subject_id,d=e.subjectName,r=e.session,u=(0,l.useState)(1),v=(0,i.Z)(u,2),m=v[0],_=v[1],S=(0,l.useState)(!1),x=(0,i.Z)(S,2),f=x[0],j=x[1],b=(0,l.useState)(!1),g=(0,i.Z)(b,2),y=g[0],N=g[1],M=(0,l.useState)([]),C=(0,i.Z)(M,2),T=C[0],F=C[1],R=(0,l.useState)(""),I=(0,i.Z)(R,2),H=I[0],E=I[1],Z=(0,l.useState)(),w=(0,i.Z)(Z,2),A=w[0],P=w[1],Y=(0,l.useState)(!0),B=(0,i.Z)(Y,2),O=B[0],G=B[1],z=(0,l.useState)(null),V=(0,i.Z)(z,2),q=V[0],U=V[1],J=(0,c.I0)(),K=(0,c.v9)((function(e){return e.session})).studentDetails,Q=[{id:1,name:L.Pi.NOTES},{id:2,name:L.Pi.REPORT},{id:3,name:L.Pi.CONTACT}],W=function(e){_(e),1===e&&te(),2===e&&function(){var e,t,n={pk_student_key:s,subject_key:a,parent_key:null===K||void 0===K||null===(e=K.student)||void 0===e||null===(t=e.tbl_parstu_relation)||void 0===t?void 0:t.fk_parent_key};J((0,p.cE)(n))}()},X=function(e,t){var n;E(e||""),void 0!==t||null!==t?P(t):P(),G(!0);var i={subject_id:a,pk_student_key:s,masteryScoreFilter:null!==(n=[0,1,2,3])&&void 0!==n&&n.includes(t)?[t]:[],primaryFilter:e?[e]:[]};J((0,p.BJ)(i)).then((function(e){var t;200===(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.statusCode)&&G(!1)})),j(!0)},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&U(e);var n={subject_id:Array.isArray(a)?a[0]:+a,pk_student_key:s,activity_topic_id:e||q,filter:t};J((0,p.RQ)(n)).then((function(e){N(!0),G(!1)}))},ee=(0,l.useCallback)((function(){G(!0);var e={pk_student_key:s};J((0,p._j)(e))}),[G,J,s]),te=(0,l.useCallback)((function(){var e={pk_student_key:s};J((0,p.I4)(e))}),[J,s]);(0,l.useEffect)((function(){s&&(ee(),te())}),[ee,te,s]);return(0,h.jsx)("div",{className:o.modalStudentMainContainer,children:(0,h.jsx)("div",{className:o.modalStudentContainer,children:y?(0,h.jsx)(k,{onFilter:function(e){return $(null,e)},loading:O,setLoading:G,subject_id:a,subjectName:d,onClickBack:function(){return N(!1)}}):f?(0,h.jsx)(D,{handleReportListing:X,loading:O,setLoading:G,levels:T,setLevels:F,masteryLevel:A,setMasteryLevel:function(e){return X(H,e)},selectedLevel:H,setSelectedLevel:function(e){return X(e,A)},subject_id:a,subjectName:d,onClickTopic:function(e){return $(e)},onClickBack:function(){return j(!1)}}):null!==K&&void 0!==K&&K.student?(0,h.jsx)(ie,{onClickTopic:function(e){return $(e)},session:r,student_key:s,handleNotesListing:te,closeModal:t,handleReportListing:X,handleTabListing:W,loading:O,masteryLevel:A,selectedLevel:H,setLoading:G,setModalForViewPastLessons:n,setReportDetails:N,tabSelected:m,tabs:Q,subject_id:a,subjectName:d}):(0,h.jsx)("div",{className:null===o||void 0===o?void 0:o.loader})})})}},79178:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(25327),l="SortTable_tableContent__aF8tY",o="SortTable_tableContent1__HGM5H",s="SortTable_tBTn_a0__6K0fR",a="SortTable_tBTn_a2__H33DJ",d="SortTable_tBTn_a1__eHMW7",r="SortTable_tBTn_a3__2ghpT",u="SortTable_tBTn_a4__vjbpN",c="SortTable_tBTn_a5__O0s9j",v=n(4809),m=n(48354),_=n(70816),p=n.n(_),S=n(92142),h=n(46311),D=n(46123),x=n.n(D),f=n(5618),j=n(46417),b=function(e,t,n,_,D,b){var g,y,N=[{dataField:"ses_date",text:"Date",sort:!0,formatter:function(e,t){var n=null===t||void 0===t?void 0:t.ses_date,i=p()(n).format("D MMM YYYY (ddd)");return(0,j.jsx)("div",{children:i})}},{dataField:"time",text:"Time",sort:!0,formatter:function(e,t){var n=p()(null===t||void 0===t?void 0:t.ses_start_time,"hh:mm A"),i=p()(null===t||void 0===t?void 0:t.ses_end_time,"hh:mm A"),l=(0,m.T)(n),o=(0,m.T)(i);return(0,j.jsxs)("div",{className:"cursor-pointer",children:[l," - ",o]})}},{dataField:"sest_name",text:"Session name",sort:!0,formatter:function(e,t){var n,i;return(0,j.jsx)("div",{children:null!==t&&void 0!==t&&null!==(n=t.tbl_session_time)&&void 0!==n&&n.sest_name?null===t||void 0===t||null===(i=t.tbl_session_time)||void 0===i?void 0:i.sest_name:"-"})}},{dataField:"subject",text:"Subject",sort:!0,formatter:function(e,t){var n,i=(0,f.Z)(null===t||void 0===t||null===(n=t.tbl_session_time)||void 0===n?void 0:n.tbl_student_enrolments);return(0,j.jsx)("div",{className:"cursor-pointer",children:i||"-"})}},{dataField:"type",text:"Type",sort:!0,formatter:function(e,t){return(0,j.jsx)("div",{children:null!==t&&void 0!==t&&t.type?null===t||void 0===t?void 0:t.type:"-"})}},{dataField:"status",text:"Status",sort:!0,formatter:function(e,t){var n,i=null===t||void 0===t||null===(n=t.tbl_session_attendance)||void 0===n?void 0:n.attendance_status,l=0===+i?s:1===+i?d:2===+i?a:3===+i?r:4===+i?u:5===+i||6===+i?c:"",o=(0,S.z)(+i);return(0,j.jsx)(h.Z,{title:o,bg:l})}},{dataField:"action",text:"",formatter:function(e,t){return(0,j.jsx)("img",{src:i.UV,alt:"",onClick:function(){b(t)},className:"cursor-pointer"})}}];return(0,j.jsx)("div",{className:l,children:(0,j.jsx)(v.Z,{keyField:"pk_ses_key",className:0===(null===(g=e||[])||void 0===g?void 0:g.length)?x()("noData",o):l,list:e||[],columns:0===(null===(y=e||[])||void 0===y?void 0:y.length)?null===N||void 0===N?void 0:N.filter((function(e){return null===e||void 0===e?void 0:e.text})):N,isPagination:!1,onTableChange:t,loading:n,sortField:_,sortOrder:D})})}},1320:function(e,t,n){n.d(t,{Bo:function(){return r},J$:function(){return s},PC:function(){return a},Pi:function(){return u},Vw:function(){return l},bV:function(){return o},cm:function(){return d}});var i=n(25327),l=[{id:1,topic:"Primary 3 > Fractions and fractions",color:"#009688",percent:31},{id:2,topic:"Primary 3 > Division",color:"#5E547A",percent:29},{id:3,topic:"Primary 3 > Algebra",color:"#E68A2E",percent:18},{id:4,topic:"Primary 3 > Addition",color:"#A9BFE9",percent:12},{id:5,topic:"Others",color:"#D83D59",percent:10}],o={PREVIEW:{id:1,name:"Preview",icon:i.iy},CONTINUE:{id:2,name:"Continue",icon:i.H3},REPEAT:{id:3,name:"Repeat",icon:i.rx},ADD_NEXT_ACTIVITY:{id:4,name:"Add next activity",icon:i._I},NEXT_ACTIVITY:{id:5,name:"Next activity",icon:i._I},DELETE:{id:6,name:"Delete",icon:i.X_},MARK:{id:7,name:"Mark",icon:i.nq}},s=[{id:1,name:"Lesson Plan",count:!1},{id:2,name:"Homework",count:!1},{id:3,name:"Previous Session",count:!1},{id:4,name:"Students",count:!0}],a=[{id:1,subject:"English",object:"english_question"},{id:2,subject:"Maths",object:"question"},{id:3,subject:"Others",object:"question"}],d=[{id:1,subject:"English",object:"english_question_parts"},{id:2,subject:"Maths",object:"question_parts"},{id:3,subject:"Others",object:"question_parts"}],r={UPCOMING:{name:"upcoming",color:"#5B51FF"},ONGOING:{name:"ongoing",color:"#EA580C"},ATTENDED:{name:"attended",color:"#65a30d"},MISSED:{name:"missed",color:"#d83d59"},CANCEL:{name:"cancel",color:"#c4c4c4"},DEFER:{name:"defer",color:"#d83d59"},DEFER_REQUESTED:{name:"defer requested",color:"#c4c4c4"}},u={NOTES:"Notes",REPORT:"Report",CONTACT:"Contact"}},33272:function(e,t,n){n.d(t,{U6:function(){return u},hJ:function(){return a},hK:function(){return s},lR:function(){return c}});var i=n(70816),l=n.n(i),o=n(48354),s=function(e){var t=l()(e,"hh:mm A");return(0,o.T)(t)},a=function(e){return null===e||void 0===e?void 0:e.slice(0,3)},d=function(e){return null===e||void 0===e?void 0:e.length},r=function(e){var t;return null===e||void 0===e||null===(t=e.filter((function(e){return null===e||void 0===e?void 0:e.status})))||void 0===t?void 0:t.length},u=function(e,t,n){var i=d(e),l=r(e),o=function(e){var t;return null===e||void 0===e||null===(t=e.filter((function(e){return null===e||void 0===e?void 0:e.marked_for_homework})))||void 0===t?void 0:t.length}(e),s="".concat(l,"/").concat(i),a=(l/i*100).toFixed(0);return i>0?i!==o||t?i===l?"All activities completed (100%)":0===n?"".concat(i," activities planned"):"".concat(s," activities completed (").concat(a,"%)"):"Offline lesson":"No activities assigned"},c=function(e){var t=d(e),n=r(e);return t>0?t===n?1:-2:0}},92142:function(e,t,n){n.d(t,{z:function(){return u}});var i="SCHEDULED",l="ONGOING",o="ATTENDED",s="MISSED",a="OFFLINE",d="DEFER",r="DEFER REQUESTED",u=function(e){return 0===+e?i:1===+e?l:2===+e?o:3===+e?s:4===+e?a:5===+e?r:6===+e?d:void 0}},48354:function(e,t,n){n.d(t,{T:function(){return i}});var i=function(e){var t=arguments.length>2?arguments[2]:void 0,n="ha";return n="00"===(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.add(t,"minutes"):e).format("mm")?"ha":"h:mma",e.format(n)}},5618:function(e,t,n){var i=n(93433),l=n(93721);t.Z=function(){var e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){var n;null===t||void 0===t||null===(n=t.tbl_enrolment_subjects)||void 0===n||n.forEach((function(t){e.push(1===+(null===t||void 0===t?void 0:t.fk_sub_id)?l.pY.ENGLISH:2===+(null===t||void 0===t?void 0:t.fk_sub_id)?l.pY.MATHS:"")}))})),(0,i.Z)(new Set(e)).sort().join(" & ")}}}]);